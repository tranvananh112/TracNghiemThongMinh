<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>QuizTva Studio - H·ªá Th·ªëng Tr·∫Øc Nghi·ªám Th√¥ng Minh</title>
    <link rel="icon" type="image/png"
        href="https://anhtran.id.vn/wp-content/uploads/2025/09/cropped-Generated-Image-September-18-2025-8_04PM-1.png">

    <!-- ü¶åüéÖ PRELOAD GIFS WITH HIGH PRIORITY FOR INSTANT LOADING -->
    <link rel="preload" href="assets/images/h∆∞u nh·∫£y.gif" as="image" fetchpriority="high">
    <link rel="preload" href="assets/images/√¥ng gi√† noel.gif" as="image" fetchpriority="high">

    <!-- Preload script ƒë·ªÉ load GIFs ngay l·∫≠p t·ª©c -->
    <script>
        // Load GIFs ngay l·∫≠p t·ª©c, kh√¥ng ƒë·ª£i DOM
        (function () {
            const reindeer = new Image();
            reindeer.src = 'assets/images/h∆∞u nh·∫£y.gif';
            const santa = new Image();
            santa.src = 'assets/images/√¥ng gi√† noel.gif';
        })();
    </script>
    <link rel="stylesheet" href="src/css/style.css">
    <link rel="stylesheet" href="src/css/components/style-modern-quiz.css">
    <link rel="stylesheet" href="src/css/components/style-updated.css">
    <link rel="stylesheet" href="src/css/components/style-ai-quiz.css">
    <link rel="stylesheet" href="src/css/responsive/style-responsive-enhanced.css">
    <link rel="stylesheet" href="src/css/responsive/style-mobile-enhanced.css">
    <link rel="stylesheet" href="src/css/responsive/style-mobile-optimized.css">
    <link rel="stylesheet" href="src/css/components/style-streak.css">
    <link rel="stylesheet" href="src/css/components/style-explore.css">
    <link rel="stylesheet" href="src/css/components/style-analytics.css">
    <link rel="stylesheet" href="src/css/components/style-room.css">
    <!-- üé† QUIZ CAROUSEL - HI·ªÜU ·ª®NG L∆Ø·ªöT T·ª∞ ƒê·ªòNG -->
    <link rel="stylesheet" href="src/css/components/style-quiz-carousel.css">
    <!-- üéÑ THEME NOEL & T·∫æT 2026 üéä -->
    <link rel="stylesheet" href="src/css/style-newyear-2026.css">
    <!-- üê± HI·ªÜU ·ª®NG CH√ÄO M·ª™NG CON M√àO -->
    <link rel="stylesheet" href="src/css/components/cat-welcome.css">
    <!-- üéØ GIAO DI·ªÜN L√ÄM B√ÄI M∆Ø·ª¢T M√Ä -->
    <!-- <link rel="stylesheet" href="src/css/components/style-smooth-quiz.css"> DISABLED - File not found -->

    <!-- üé† CAROUSEL - S·ª≠ d·ª•ng CSS t·ª´ file external style-quiz-carousel.css -->
    <!-- üö´ T·∫ÆT ƒê∆Ø·ªúNG K·∫∫ DI CHUY·ªÇN -->
    <style>
        /* Ch·ªâ x√≥a g·∫°ch ·ªü Chu·ªói ng√†y h·ªçc (streak-card) */
        .streak-card::before,
        .streak-card::after,
        .stat-card::before {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            animation: none !important;
            transition: none !important;
            transform: none !important;
        }
    </style>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- JSZip library for reading Word files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <!-- üéÖ Rive Animation Library for Santa Claus -->
    <script src="https://unpkg.com/@rive-app/canvas@2.7.0"></script>

</head>

<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobile-menu-toggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <!-- Main Layout -->
    <div class="app-layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <i class="fas fa-graduation-cap logo-icon"></i>
                    <span class="logo-text">QuizTva Studio</span>
                </div>
                <button class="sidebar-toggle" id="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <div class="sidebar-content">
                <!-- User Section -->
                <div class="sidebar-section">
                    <div class="user-profile">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-info">
                            <div class="user-name">C√° nh√¢n</div>
                        </div>
                    </div>
                </div>

                <!-- Main Menu -->
                <nav class="sidebar-nav">
                    <div class="nav-section">
                        <a href="#" class="nav-item active" data-tab="home">
                            <i class="fas fa-home"></i>
                            <span>Trang Ch·ªß</span>
                        </a>
                        <a href="#" class="nav-item" data-tab="input">
                            <i class="fas fa-plus-circle"></i>
                            <span>T·∫°o B√†i Quiz</span>
                        </a>
                        <a href="#" class="nav-item" data-tab="ai-quiz">
                            <i class="fas fa-robot"></i>
                            <span>AI T·∫°o Quiz</span>
                        </a>
                        <a href="#" class="nav-item" data-tab="room">
                            <i class="fas fa-door-open"></i>
                            <span>T·∫°o Ph√≤ng Thi</span>
                        </a>
                        <a href="#" class="nav-item" data-tab="explore">
                            <i class="fas fa-compass"></i>
                            <span>Kh√°m Ph√° ƒê·ªÅ Thi</span>
                        </a>
                        <a href="#" class="nav-item" data-tab="manage">
                            <i class="fas fa-list"></i>
                            <span>Qu·∫£n L√Ω Quiz</span>
                        </a>
                        <a href="#" class="nav-item" data-tab="quiz">
                            <i class="fas fa-play-circle"></i>
                            <span>L√†m B√†i</span>
                        </a>
                        <a href="#" class="nav-item" data-tab="results">
                            <i class="fas fa-chart-bar"></i>
                            <span>K·∫øt Qu·∫£</span>
                        </a>
                        <a href="#" class="nav-item" data-tab="analytics" id="analytics-nav-item">
                            <i class="fas fa-chart-line"></i>
                            <span>B√°o C√°o</span>
                            <span class="admin-only-badge">Admin</span>
                        </a>
                    </div>
                </nav>

                <!-- Footer -->
                <div class="sidebar-footer">
                    <div class="copyright">
                        ¬© Tr·∫ßn VƒÉn Anh - 2025
                    </div>

                    <!-- üéÑ MERRY CHRISTMAS GIF ANIMATION -->
                    <div class="christmas-gif-container">
                        <img src="assets/images/Merry Christmas GIF.gif" alt="Merry Christmas" class="christmas-gif">
                        <div class="gif-overlay">
                            <div class="christmas-greeting">üéÑ Gi√°ng Sinh An L√†nh! üéÑ</div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="main-wrapper">
            <!-- Top Header -->
            <header class="top-header">
                <div class="header-left">
                    <div class="current-quiz-info">
                        <div class="quiz-avatar">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="quiz-details">
                            <div class="quiz-name">K√™nh ƒë·ªÅ thi</div>
                        </div>
                    </div>
                </div>

                <div class="header-center">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="T√¨m ki·∫øm ƒë·ªÅ thi" id="search-input">
                    </div>
                </div>

                <div class="header-right">
                    <button class="btn-create-quiz" data-tab="input">
                        <i class="fas fa-plus"></i>
                        <span>T·∫°o ƒë·ªÅ thi</span>
                    </button>

                    <!-- üéÑ TEXT NOEL 3D -->
                    <div class="christmas-text-3d">
                        <div class="christmas-line-1">Merry Christmas</div>
                        <div class="christmas-line-2">Happy New Year 2026</div>
                    </div>

                    <button class="theme-toggle-btn" id="theme-toggle">
                        <i class="fas fa-moon"></i>
                    </button>
                    <div class="user-menu">
                        <div class="user-avatar-small" id="admin-logo-trigger" style="cursor: pointer;"
                            title="Admin Access">
                            <img src="https://anhtran.id.vn/wp-content/uploads/2025/09/cropped-Generated-Image-September-18-2025-8_04PM-1.png"
                                alt="User Avatar" class="user-avatar-image">
                        </div>
                    </div>
                </div>
            </header>

            <!-- Main Content Area -->
            <main class="main-content-area">
                <!-- Home Tab -->
                <section id="home-tab" class="tab-content active">
                    <!-- Stats Section -->
                    <div class="stats-section">
                        <h2 class="section-title">Th√†nh t·ª±u h·ªçc t·∫≠p</h2>

                        <div class="stats-grid">
                            <div class="stat-card" style="position: relative; overflow: visible;">
                                <!-- üéÖ SANTA CLAUS GIF ON TOP -->
                                <img src="assets/images/√¥ng gi√† noel.gif" alt="Santa Claus" class="santa-on-card"
                                    loading="eager" fetchpriority="high" decoding="async"
                                    style="position: absolute; top: -30px; right: 10px; width: 60px; z-index: 10;">

                                <div class="stat-icon blue">
                                    <i class="fas fa-book-open"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label">T·ªïng s·ªë quiz</div>
                                    <div class="stat-value" id="total-quizzes">0</div>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-icon green">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label">ƒê√£ ho√†n th√†nh</div>
                                    <div class="stat-value" id="completed-quizzes">0</div>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-icon purple">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label">ƒêi·ªÉm trung b√¨nh</div>
                                    <div class="stat-value" id="average-score">0</div>
                                </div>
                            </div>

                            <div class="stat-card streak-card" onclick="quizManager.showStreakDetails()"
                                style="position: relative; overflow: visible;">
                                <!-- ü¶å JUMPING REINDEER ON TOP -->
                                <img src="assets/images/h∆∞u nh·∫£y.gif" alt="Jumping Reindeer" class="reindeer-on-card"
                                    loading="eager" fetchpriority="high" decoding="async"
                                    style="position: absolute; top: -30px; right: 10px; width: 60px; z-index: 10;">

                                <div class="stat-icon red">
                                    <i class="fas fa-fire"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label">Chu·ªói ng√†y h·ªçc</div>
                                    <div class="stat-value" id="streak-days">0</div>
                                    <div class="stat-sublabel" id="streak-message">B·∫Øt ƒë·∫ßu h·ªçc h√¥m nay!</div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- Recent Access Section -->
                    <div class="recent-section carousel-section">
                        <div class="section-header">
                            <h2 class="section-title">üìö Quiz C·ªßa B·∫°n</h2>
                            <a href="#" class="view-more" data-tab="manage">Xem t·∫•t c·∫£</a>
                        </div>

                        <div class="quiz-grid" id="home-quiz-grid">
                            <div class="empty-state-card">
                                <i class="fas fa-folder-open"></i>
                                <h3>Ch∆∞a c√≥ quiz n√†o</h3>
                                <p>H√£y t·∫°o quiz ƒë·∫ßu ti√™n c·ªßa b·∫°n!</p>
                                <button class="btn-primary" data-tab="input">
                                    <i class="fas fa-plus"></i>
                                    T·∫°o quiz m·ªõi
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Shared Quiz Carousel Section -->
                    <div class="recent-section carousel-section">
                        <div class="section-header">
                            <h2 class="section-title">üåê Quiz ƒê√£ Chia S·∫ª</h2>
                            <a href="#" class="view-more" data-tab="explore">Xem t·∫•t c·∫£</a>
                        </div>

                        <div class="quiz-grid" id="shared-quiz-carousel">
                            <div class="empty-state-card">
                                <i class="fas fa-globe"></i>
                                <h3>ƒêang t·∫£i quiz ƒë√£ chia s·∫ª...</h3>
                                <p>Vui l√≤ng ƒë·ª£i trong gi√¢y l√°t</p>
                            </div>
                        </div>
                    </div>

                    <!-- Features Section -->
                    <div class="features-section">
                        <h2 class="section-title">T√≠nh nƒÉng n·ªïi b·∫≠t</h2>
                        <div class="features-grid">
                            <div class="feature-card">
                                <div class="feature-icon"><i class="fas fa-magic"></i></div>
                                <h3>T·∫°o Quiz Nhanh</h3>
                                <p>Nh·∫≠p c√¢u h·ªèi v√† ƒë√°p √°n ƒë∆°n gi·∫£n, h·ªá th·ªëng t·ª± ƒë·ªông x·ª≠ l√Ω</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                                <h3>Qu·∫£n L√Ω Th√¥ng Minh</h3>
                                <p>Ch·ªânh s·ª≠a, sao ch√©p, x√≥a quiz d·ªÖ d√†ng</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon"><i class="fas fa-mobile-alt"></i></div>
                                <h3>Responsive</h3>
                                <p>Ho·∫°t ƒë·ªông m∆∞·ª£t m√† tr√™n m·ªçi thi·∫øt b·ªã</p>
                            </div>
                        </div>
                    </div>


                </section>

                <!-- Input Tab -->
                <section id="input-tab" class="tab-content">
                    <div class="page-header">
                        <h2 class="page-title">
                            <i class="fas fa-plus-circle"></i>
                            T·∫°o B√†i Quiz M·ªõi
                        </h2>
                    </div>

                    <div class="form-card">
                        <div class="form-group">
                            <label>T√™n b√†i quiz</label>
                            <input type="text" id="quiz-title" placeholder="Nh·∫≠p t√™n b√†i quiz..." class="form-input">
                        </div>

                        <div class="form-group">
                            <label>M√¥ t·∫£</label>
                            <textarea id="quiz-description" placeholder="M√¥ t·∫£ b√†i quiz (kh√¥ng b·∫Øt bu·ªôc)..."
                                class="form-textarea"></textarea>
                        </div>

                        <div class="form-group">
                            <label>
                                <i class="fas fa-question-circle"></i>
                                C√¢u h·ªèi v√† l·ª±a ch·ªçn
                            </label>
                            <button class="btn-paste-inline"
                                onclick="quizManager.pasteFromClipboard('questions-input')">
                                <i class="fas fa-paste"></i>
                                D√°n
                            </button>
                            <button class="btn-paste-inline" onclick="quizManager.autoFormatQuestions()"
                                title="T·ª± ƒë·ªông t√°ch vƒÉn b·∫£n tr·∫£i ngang th√†nh nhi·ªÅu d√≤ng">
                                <i class="fas fa-magic"></i>
                                T·ª± ƒë·ªông ƒë·ªãnh d·∫°ng
                            </button>
                            <textarea id="questions-input"
                                placeholder="Nh·∫≠p c√¢u h·ªèi (h·ªó tr·ª£ nhi·ªÅu format):&#10;&#10;C√¢u 1: Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam?&#10;A. H·ªì Ch√≠ Minh&#10;B. H√† N·ªôi&#10;&#10;Ho·∫∑c: 1. Th·ªß ƒë√¥?&#10;A) HCM&#10;B) HN&#10;&#10;Click 'Xem v√≠ d·ª•' ƒë·ªÉ bi·∫øt th√™m format"
                                class="form-textarea large" oninput="quizManager.previewQuestions()"></textarea>
                            <div id="questions-preview" class="input-preview"></div>
                            <button type="button" class="btn-help"
                                onclick="quizManager.showFormatExamples('questions')">
                                <i class="fas fa-question-circle"></i> Xem v√≠ d·ª• format
                            </button>
                        </div>

                        <div class="form-group">
                            <label>
                                <i class="fas fa-check-circle"></i>
                                ƒê√°p √°n ƒë√∫ng
                            </label>
                            <button class="btn-paste-inline" onclick="quizManager.pasteFromClipboard('answers-input')">
                                <i class="fas fa-paste"></i>
                                D√°n
                            </button>
                            <textarea id="answers-input"
                                placeholder="Nh·∫≠p ƒë√°p √°n (h·ªó tr·ª£ nhi·ªÅu format):&#10;&#10;C√¢u 1: B&#10;C√¢u 2: A&#10;&#10;Ho·∫∑c: 1. B&#10;2. A&#10;&#10;Ho·∫∑c ƒë∆°n gi·∫£n: B&#10;A"
                                class="form-textarea" oninput="quizManager.previewAnswers()"></textarea>
                            <div id="answers-preview" class="input-preview"></div>
                            <button type="button" class="btn-help" onclick="quizManager.showFormatExamples('answers')">
                                <i class="fas fa-question-circle"></i> Xem v√≠ d·ª• format
                            </button>
                        </div>

                        <div class="form-actions">
                            <button class="btn-primary" id="process-quiz">
                                <i class="fas fa-magic"></i>
                                X·ª≠ l√Ω & T·∫°o quiz
                            </button>
                            <button class="btn-secondary" id="clear-input">
                                <i class="fas fa-trash"></i>
                                X√≥a h·∫øt
                            </button>
                        </div>
                    </div>
                </section>

                <!-- AI Quiz Tab -->
                <section id="ai-quiz-tab" class="tab-content">
                    <div class="page-header">
                        <h2 class="page-title">
                            <i class="fas fa-robot"></i>
                            AI T·∫°o Quiz T·ª± ƒê·ªông
                        </h2>
                        <p style="margin-top: 10px; opacity: 0.9;">
                            D√°n n·ªôi dung b√†i h·ªçc, AI s·∫Ω t·ª± ƒë·ªông t·∫°o c√¢u h·ªèi tr·∫Øc nghi·ªám cho b·∫°n
                        </p>
                    </div>

                    <div class="form-card">
                        <div class="ai-info-banner">
                            <i class="fas fa-info-circle"></i>
                            <div>
                                <strong>C√°ch s·ª≠ d·ª•ng:</strong> T·∫£i file t√†i li·ªáu (Word, PDF, TXT) ho·∫∑c d√°n n·ªôi dung b√†i
                                h·ªçc v√†o √¥ b√™n d∆∞·ªõi.
                                AI s·∫Ω ph√¢n t√≠ch v√† t·ª± ƒë·ªông t·∫°o c√¢u h·ªèi tr·∫Øc nghi·ªám t·ª´ n·ªôi dung ƒë√≥.
                            </div>
                        </div>

                        <!-- File Upload Section -->
                        <div class="form-group">
                            <label>
                                <i class="fas fa-cloud-upload-alt"></i>
                                T·∫£i file t√†i li·ªáu
                            </label>
                            <div class="file-upload-area" id="file-upload-area">
                                <input type="file" id="ai-file-input" accept=".txt,.doc,.docx,.pdf"
                                    style="display: none;">
                                <div class="file-upload-content">
                                    <i class="fas fa-file-upload"></i>
                                    <h4>K√©o th·∫£ file v√†o ƒë√¢y ho·∫∑c click ƒë·ªÉ ch·ªçn</h4>
                                    <p>H·ªó tr·ª£: Word (.docx), PDF (.pdf), Text (.txt)</p>
                                    <button type="button" class="btn-secondary" id="select-file-btn">
                                        <i class="fas fa-folder-open"></i>
                                        Ch·ªçn File
                                    </button>
                                </div>
                                <div class="file-info" id="file-info" style="display: none;">
                                    <div class="file-icon">
                                        <i class="fas fa-file-alt"></i>
                                    </div>
                                    <div class="file-details">
                                        <div class="file-name" id="file-name"></div>
                                        <div class="file-size" id="file-size"></div>
                                    </div>
                                    <button type="button" class="btn-remove-file" id="remove-file-btn">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="divider-with-text">
                            <span>HO·∫∂C</span>
                        </div>

                        <div class="form-group">
                            <label>
                                <i class="fas fa-keyboard"></i>
                                Nh·∫≠p n·ªôi dung tr·ª±c ti·∫øp
                            </label>
                            <button class="btn-paste-inline" id="paste-ai-content">
                                <i class="fas fa-paste"></i>
                                D√°n
                            </button>
                            <textarea id="ai-content-input"
                                placeholder="D√°n n·ªôi dung b√†i h·ªçc v√†o ƒë√¢y...&#10;&#10;V√≠ d·ª•:&#10;Vi·ªát Nam l√† m·ªôt qu·ªëc gia n·∫±m ·ªü ƒê√¥ng Nam √Å. Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† H√† N·ªôi. Vi·ªát Nam c√≥ di·ªán t√≠ch kho·∫£ng 331.212 km¬≤ v√† d√¢n s·ªë kho·∫£ng 98 tri·ªáu ng∆∞·ªùi. Vi·ªát Nam c√≥ 63 t·ªânh th√†nh..."
                                class="form-textarea large" rows="12"></textarea>
                        </div>

                        <div class="form-group">
                            <label>
                                <i class="fas fa-list-ol"></i>
                                S·ªë l∆∞·ª£ng c√¢u h·ªèi
                            </label>
                            <input type="number" id="ai-question-count" value="10" min="5" max="50" class="form-input"
                                style="max-width: 200px;">
                            <small style="display: block; margin-top: 8px; opacity: 0.7;">
                                AI s·∫Ω c·ªë g·∫Øng t·∫°o s·ªë c√¢u h·ªèi n√†y (t√πy thu·ªôc v√†o ƒë·ªô d√†i n·ªôi dung)
                            </small>
                        </div>

                        <div class="form-actions">
                            <button class="btn-primary" id="generate-ai-quiz">
                                <i class="fas fa-magic"></i>
                                T·∫°o Quiz B·∫±ng AI
                            </button>
                            <button class="btn-secondary" id="clear-ai-input">
                                <i class="fas fa-trash"></i>
                                X√≥a N·ªôi Dung
                            </button>
                        </div>

                        <!-- Loading State -->
                        <div id="ai-loading" class="ai-loading" style="display: none;">
                            <div class="ai-loading-spinner"></div>
                            <div class="ai-loading-text">
                                <h3>ü§ñ AI ƒëang ph√¢n t√≠ch n·ªôi dung...</h3>
                                <p>Vui l√≤ng ƒë·ª£i trong gi√¢y l√°t</p>
                            </div>
                        </div>

                        <!-- Preview Section -->
                        <div id="ai-preview" class="ai-preview-section" style="display: none;">
                            <div class="ai-preview-header">
                                <h3>
                                    <i class="fas fa-eye"></i>
                                    Xem Tr∆∞·ªõc Quiz
                                    <span class="ai-question-count">
                                        (<span id="ai-question-total">0</span> c√¢u h·ªèi)
                                    </span>
                                </h3>
                                <div class="ai-preview-actions">
                                    <button class="btn-secondary btn-sm" id="edit-ai-quiz">
                                        <i class="fas fa-edit"></i>
                                        Ch·ªânh S·ª≠a
                                    </button>
                                </div>
                            </div>

                            <div class="form-group" style="margin-top: 20px;">
                                <label>
                                    <i class="fas fa-tag"></i>
                                    T√™n quiz
                                </label>
                                <input type="text" id="ai-quiz-name" placeholder="Nh·∫≠p t√™n cho quiz..."
                                    class="form-input">
                            </div>

                            <div id="ai-quiz-preview-content" class="ai-quiz-preview-content">
                                <!-- Questions will be inserted here -->
                            </div>

                            <div class="form-actions" style="margin-top: 30px;">
                                <button class="btn-primary" id="save-ai-quiz">
                                    <i class="fas fa-save"></i>
                                    L∆∞u Quiz
                                </button>
                                <button class="btn-secondary" id="cancel-ai-quiz">
                                    <i class="fas fa-times"></i>
                                    H·ªßy
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Explore Tab - REDESIGNED ADAPTIVE LAYOUT -->
                <!-- Explore Tab -->
                <section id="explore-tab" class="tab-content">
                    <!-- üéØ ADAPTIVE HEADER & CONTROLS - Ch·ªâ s·ª≠a ph·∫ßn tr√™n -->
                    <div class="explore-top-section">
                        <!-- üì± DEVICE-AWARE HEADER -->
                        <div class="explore-header-adaptive">
                            <div class="explore-title-section">
                                <div class="explore-icon-wrapper">
                                    <i class="fas fa-compass"></i>
                                </div>
                                <div class="explore-title-content">
                                    <h2>Kh√°m Ph√° ƒê·ªÅ Thi</h2>
                                    <p class="explore-subtitle">Kh√°m ph√° v√† l√†m b√†i c√°c ƒë·ªÅ thi t·ª´ c·ªông ƒë·ªìng</p>
                                </div>
                            </div>
                            <div class="explore-device-indicator" id="device-indicator">
                                <i class="fas fa-desktop"></i>
                                <span>Desktop</span>
                            </div>
                        </div>

                        <!-- üé® SMART CONTROL PANEL - B·ªë c·ª•c th√¥ng minh -->
                        <div class="smart-control-panel" id="smart-control-panel">

                            <!-- User Identity Card -->
                            <div class="control-card user-identity-card">
                                <div class="card-icon">
                                    <i class="fas fa-user-circle"></i>
                                </div>
                                <div class="card-content">
                                    <label>T√™n hi·ªÉn th·ªã</label>
                                    <input type="text" id="user-name-input" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n..."
                                        class="smart-input">
                                </div>
                            </div>

                            <!-- Room Access Card -->
                            <div class="control-card room-access-card">
                                <div class="card-icon">
                                    <i class="fas fa-door-open"></i>
                                </div>
                                <div class="card-content">
                                    <label>V√†o Ph√≤ng Thi</label>
                                    <div class="room-input-group">
                                        <input type="text" id="join-room-code-input" placeholder="M√£ 6 s·ªë" maxlength="6"
                                            class="smart-input room-code">
                                        <button class="smart-btn primary" id="btn-join-room">
                                            <i class="fas fa-arrow-right"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Category Filter Card -->
                            <div class="control-card category-filter-card">
                                <div class="card-icon">
                                    <i class="fas fa-filter"></i>
                                </div>
                                <div class="card-content">
                                    <label>L·ªçc theo m√¥n</label>
                                    <select id="category-filter-select" class="smart-select">
                                        <option value="all">üéØ T·∫•t c·∫£ m√¥n h·ªçc</option>
                                        <option value="toan-cao-cap">üìê To√°n cao c·∫•p</option>
                                        <option value="vat-ly-dai-cuong">‚öóÔ∏è V·∫≠t l√Ω ƒë·∫°i c∆∞∆°ng</option>
                                        <option value="hoa-dai-cuong">üß™ H√≥a ƒë·∫°i c∆∞∆°ng</option>
                                        <option value="sinh-hoc-dai-cuong">üß¨ Sinh h·ªçc ƒë·∫°i c∆∞∆°ng</option>
                                        <option value="tieng-anh">üåç Ti·∫øng Anh</option>
                                        <option value="tin-hoc-dai-cuong">üíª Tin h·ªçc ƒë·∫°i c∆∞∆°ng</option>
                                        <option value="kinh-te-hoc">üí∞ Kinh t·∫ø h·ªçc</option>
                                        <option value="quan-tri-kinh-doanh">üìä Qu·∫£n tr·ªã kinh doanh</option>
                                        <option value="ke-toan">üìã K·∫ø to√°n</option>
                                        <option value="marketing">üìà Marketing</option>
                                        <option value="luat-hoc">‚öñÔ∏è Lu·∫≠t h·ªçc</option>
                                        <option value="tam-ly-hoc">üß† T√¢m l√Ω h·ªçc</option>
                                        <option value="giao-duc-hoc">üéì Gi√°o d·ª•c h·ªçc</option>
                                        <option value="ngoai-ngu">üó£Ô∏è Ngo·∫°i ng·ªØ</option>
                                        <option value="cong-nghe-thong-tin">üîß C√¥ng ngh·ªá th√¥ng tin</option>
                                        <option value="dien-tu-vien-thong">üì° ƒêi·ªán t·ª≠ vi·ªÖn th√¥ng</option>
                                        <option value="co-khi">‚öôÔ∏è C∆° kh√≠</option>
                                        <option value="xay-dung">üèóÔ∏è X√¢y d·ª±ng</option>
                                        <option value="y-hoc">üè• Y h·ªçc</option>
                                        <option value="duoc-hoc">üíä D∆∞·ª£c h·ªçc</option>
                                        <option value="nong-nghiep">üåæ N√¥ng nghi·ªáp</option>
                                        <option value="thuy-san">üêü Th·ªßy s·∫£n</option>
                                        <option value="lam-nghiep">üå≤ L√¢m nghi·ªáp</option>
                                        <option value="moi-truong">üåç M√¥i tr∆∞·ªùng</option>
                                        <option value="khac">üìö Kh√°c</option>
                                    </select>
                                    <div class="filter-result" id="filter-result-text">
                                        Hi·ªÉn th·ªã t·∫•t c·∫£ t√†i li·ªáu
                                    </div>
                                </div>
                            </div>

                            <!-- Action Card -->
                            <div class="control-card action-card">
                                <button class="smart-btn secondary full-width" id="refresh-shared-quizzes">
                                    <i class="fas fa-sync-alt"></i>
                                    <span>L√†m m·ªõi</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- üéØ ORIGINAL QUIZ DISPLAY AREA - Gi·ªØ nguy√™n nh∆∞ c≈© -->
                    <!-- Loading State -->
                    <div id="explore-loading" class="explore-loading">
                        <div class="explore-loading-spinner"></div>
                        <div class="explore-loading-text">ƒêang t·∫£i ƒë·ªÅ thi...</div>
                    </div>

                    <!-- Shared Quizzes Section - New Horizontal Layout -->
                    <div class="shared-quizzes-section" id="shared-quizzes-section">
                        <!-- Trending Quizzes -->
                        <div class="quiz-section">
                            <div class="section-header">
                                <h3><i class="fas fa-fire"></i> ƒê·ªÅ thi l√™n xu h∆∞·ªõng</h3>
                                <button class="btn-see-more" onclick="exploreQuizManager.showAllQuizzes('trending')">
                                    <span>Xem th√™m</span>
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                            <div class="quiz-container-wrapper">
                                <div class="quiz-horizontal-scroll" id="trending-quizzes">
                                    <div class="quiz-loading">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        <span>ƒêang t·∫£i ƒë·ªÅ thi xu h∆∞·ªõng...</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Latest Quizzes -->
                        <div class="quiz-section">
                            <div class="section-header">
                                <h3><i class="fas fa-clock"></i> ƒê·ªÅ thi m·ªõi nh·∫•t</h3>
                                <button class="btn-see-more" onclick="exploreQuizManager.showAllQuizzes('latest')">
                                    <span>Xem th√™m</span>
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                            <div class="quiz-container-wrapper">
                                <div class="quiz-horizontal-scroll" id="latest-quizzes">
                                    <div class="quiz-loading">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        <span>ƒêang t·∫£i ƒë·ªÅ thi m·ªõi nh·∫•t...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Room Tab - T·∫°o Ph√≤ng Thi -->
                <section id="room-tab" class="tab-content">
                    <div class="page-header">
                        <h2 class="page-title">
                            <i class="fas fa-door-open"></i>
                            T·∫°o Ph√≤ng Thi
                        </h2>
                        <p style="margin-top: 10px; opacity: 0.9;">
                            T·∫°o ph√≤ng thi ri√™ng ƒë·ªÉ chia s·∫ª v·ªõi l·ªõp h·ªçc m√† kh√¥ng c·∫ßn chia s·∫ª l√™n c·ªông ƒë·ªìng
                        </p>
                    </div>

                    <!-- Room Creation Section -->
                    <div class="room-creation-section">
                        <div class="room-creation-header">
                            <i class="fas fa-plus-circle"></i>
                            <h3>T·∫°o Ph√≤ng Thi M·ªõi</h3>
                        </div>

                        <div class="room-form-grid">
                            <div class="room-form-group">
                                <label>
                                    <i class="fas fa-signature"></i>
                                    T√™n ph√≤ng <span style="color: red;">*</span>
                                </label>
                                <input type="text" id="room-name-input" placeholder="V√≠ d·ª•: Ki·ªÉm tra To√°n 10 - Ch∆∞∆°ng 1"
                                    maxlength="100">
                            </div>

                            <div class="room-form-group">
                                <label>
                                    <i class="fas fa-key"></i>
                                    M√£ ph√≤ng (6 s·ªë) <span style="color: red;">*</span>
                                </label>
                                <div class="room-code-generator">
                                    <input type="text" id="room-code-input" placeholder="Nh·∫≠p ho·∫∑c t·∫°o t·ª± ƒë·ªông"
                                        maxlength="6" pattern="[0-9]{6}">
                                    <button class="btn-generate-code" id="btn-generate-room-code">
                                        <i class="fas fa-random"></i>
                                        T·∫°o m√£
                                    </button>
                                </div>
                                <small class="room-code-note">
                                    M√£ ph√≤ng d√πng ƒë·ªÉ ng∆∞·ªùi kh√°c tham gia
                                </small>
                            </div>

                            <div class="room-form-group room-quiz-selector">
                                <label>
                                    <i class="fas fa-book"></i>
                                    Ch·ªçn ƒë·ªÅ thi <span style="color: red;">*</span>
                                </label>
                                <select id="room-quiz-selector">
                                    <option value="">-- Ch·ªçn ƒë·ªÅ thi t·ª´ Qu·∫£n l√Ω Quiz --</option>
                                </select>
                                <small class="room-code-note">
                                    ƒê·ªÅ thi ph·∫£i ƒë∆∞·ª£c t·∫°o tr∆∞·ªõc trong m·ª•c "Qu·∫£n l√Ω Quiz"
                                </small>
                            </div>

                            <div class="room-form-group" style="grid-column: 1 / -1;">
                                <label>
                                    <i class="fas fa-align-left"></i>
                                    M√¥ t·∫£ ph√≤ng
                                </label>
                                <textarea id="room-description-input" placeholder="M√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ ph√≤ng thi n√†y..."
                                    rows="3"></textarea>
                            </div>
                        </div>

                        <div class="room-actions">
                            <button class="btn-create-room" id="btn-create-room">
                                <i class="fas fa-plus-circle"></i>
                                T·∫°o Ph√≤ng Thi
                            </button>
                        </div>
                    </div>

                    <!-- My Rooms Section -->
                    <div class="my-rooms-section">
                        <div class="my-rooms-header">
                            <h3>
                                <i class="fas fa-list"></i>
                                Ph√≤ng Thi C·ªßa T√¥i
                            </h3>
                            <button class="btn-refresh" id="refresh-my-rooms">
                                <i class="fas fa-sync-alt"></i>
                                L√†m m·ªõi
                            </button>
                        </div>

                        <!-- Loading State -->
                        <div id="rooms-loading" class="room-loading" style="display: none;">
                            <div class="room-loading-spinner"></div>
                            <div class="room-loading-text">ƒêang t·∫£i ph√≤ng thi...</div>
                        </div>

                        <!-- Rooms Grid -->
                        <div class="rooms-grid" id="my-rooms-grid">
                            <div class="rooms-empty-state">
                                <i class="fas fa-door-open"></i>
                                <h3>Ch∆∞a c√≥ ph√≤ng thi n√†o</h3>
                                <p>H√£y t·∫°o ph√≤ng thi ƒë·∫ßu ti√™n c·ªßa b·∫°n!</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Manage Tab -->
                <section id="manage-tab" class="tab-content">
                    <div class="page-header">
                        <h2 class="page-title">
                            <i class="fas fa-cog"></i>
                            Qu·∫£n L√Ω Quiz
                        </h2>
                    </div>

                    <div id="quiz-list" class="quiz-manage-list">
                        <div class="empty-state-card">
                            <i class="fas fa-folder-open"></i>
                            <h3>Ch∆∞a c√≥ quiz n√†o</h3>
                            <p>H√£y t·∫°o quiz ƒë·∫ßu ti√™n c·ªßa b·∫°n!</p>
                        </div>
                    </div>
                </section>

                <!-- Quiz Tab -->
                <section id="quiz-tab" class="tab-content">
                    <div class="page-header">
                        <h2 class="page-title">
                            <i class="fas fa-play"></i>
                            L√†m B√†i Tr·∫Øc Nghi·ªám
                        </h2>
                    </div>

                    <div class="quiz-start-card">
                        <div class="quiz-controls-modern">
                            <div class="quiz-control-group">
                                <label>
                                    <i class="fas fa-clipboard-list"></i>
                                    Ch·ªçn b√†i quiz
                                </label>
                                <select id="quiz-selector" class="form-select">
                                    <option value="">-- Ch·ªçn b√†i quiz ƒë·ªÉ l√†m --</option>
                                </select>
                            </div>

                            <div class="quiz-control-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="shuffle-questions">
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">
                                        <i class="fas fa-random"></i>
                                        X√°o tr·ªôn c√¢u h·ªèi
                                    </span>
                                </label>
                            </div>

                            <div class="quiz-control-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="enable-sound" checked>
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">
                                        <i class="fas fa-volume-up"></i>
                                        B·∫≠t √¢m thanh
                                    </span>
                                </label>
                            </div>

                            <button id="start-quiz" class="btn-primary btn-large" disabled>
                                <i class="fas fa-play"></i>
                                B·∫Øt ƒê·∫ßu L√†m B√†i
                            </button>
                        </div>
                    </div>

                    <div id="quiz-container" class="quiz-container"></div>
                </section>

                <!-- Results Tab -->
                <section id="results-tab" class="tab-content">
                    <div class="page-header">
                        <h2 class="page-title">
                            <i class="fas fa-trophy"></i>
                            K·∫øt Qu·∫£ L√†m B√†i
                        </h2>
                    </div>

                    <div id="results-container" class="results-container">
                        <div class="empty-state-card">
                            <i class="fas fa-chart-line"></i>
                            <h3>Ch∆∞a c√≥ k·∫øt qu·∫£ n√†o</h3>
                            <p>Ho√†n th√†nh m·ªôt b√†i quiz ƒë·ªÉ xem k·∫øt qu·∫£</p>
                        </div>
                    </div>
                </section>

                <!-- Analytics Tab (Admin Only) -->
                <section id="analytics-tab" class="tab-content">
                    <div class="page-header">
                        <h2 class="page-title">
                            <i class="fas fa-chart-line"></i>
                            B√°o C√°o Analytics
                            <span class="admin-only-badge" style="margin-left: 15px;">Admin Only</span>
                        </h2>
                        <p style="margin-top: 10px; opacity: 0.9;">
                            Theo d√µi ho·∫°t ƒë·ªông ng∆∞·ªùi d√πng, thi·∫øt b·ªã, v·ªã tr√≠ v√† th·ªëng k√™ truy c·∫≠p
                        </p>
                    </div>

                    <div id="analytics-content">
                        <!-- Content will be loaded by admin-analytics.js -->
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Modal for editing quiz -->
    <div id="edit-modal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Ch·ªânh S·ª≠a Quiz</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="edit-title" placeholder="T√™n quiz..." class="modal-input">
                <textarea id="edit-description" placeholder="M√¥ t·∫£..." class="modal-textarea"></textarea>
                <div id="edit-questions" class="edit-questions"></div>
            </div>
            <div class="modal-footer">
                <button id="save-edit" class="btn-primary">
                    <i class="fas fa-save"></i>
                    L∆∞u Thay ƒê·ªïi
                </button>
                <button id="cancel-edit" class="btn-secondary">
                    <i class="fas fa-times"></i>
                    H·ªßy
                </button>
            </div>
        </div>
    </div>

    <!-- Modal for quiz details -->
    <div id="quiz-details-modal" class="modal">
        <div class="quiz-details-modal-content modal-content">
            <div class="quiz-details-content">
                <!-- Content will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Admin Password Modal -->
    <div id="admin-password-modal" class="modal">
        <div class="modal-overlay" onclick="adminManager.closePasswordModal()"></div>
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3><i class="fas fa-shield-alt"></i> Admin Access</h3>
                <button class="modal-close" onclick="adminManager.closePasswordModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>
                        <i class="fas fa-lock"></i>
                        Nh·∫≠p m·∫≠t kh·∫©u Admin (6 s·ªë)
                    </label>
                    <input type="password" id="admin-password-input" placeholder="Nh·∫≠p m·∫≠t kh·∫©u..." class="form-input"
                        maxlength="6" style="text-align: center; font-size: 24px; letter-spacing: 10px;">
                    <small style="display: block; margin-top: 8px; color: var(--text-secondary);">
                        Ch·ªâ Admin m·ªõi c√≥ quy·ªÅn truy c·∫≠p
                    </small>
                </div>
                <div id="admin-error-message"
                    style="display: none; color: #ef4444; margin-top: 10px; text-align: center;">
                    <i class="fas fa-exclamation-circle"></i>
                    M·∫≠t kh·∫©u kh√¥ng ƒë√∫ng!
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="adminManager.verifyPassword()">
                    <i class="fas fa-sign-in-alt"></i>
                    ƒêƒÉng Nh·∫≠p
                </button>
                <button class="btn-secondary" onclick="adminManager.closePasswordModal()">
                    <i class="fas fa-times"></i>
                    H·ªßy
                </button>
            </div>
        </div>
    </div>

    <!-- Room Details Modal -->
    <div id="room-details-modal" class="room-details-modal">
        <div class="room-details-content">
            <div class="room-details-modal-content">
                <!-- Content will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- User Name Modal -->
    <div id="user-name-modal" class="user-name-modal">
        <div class="user-name-content">
            <div class="user-name-modal-content">
                <!-- Content will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal for sharing quiz -->
    <div id="share-quiz-modal" class="modal">
        <div class="modal-overlay" onclick="exploreQuizManager.closeShareModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-share-alt"></i> Chia S·∫ª ƒê·ªÅ Thi</h3>
                <button class="modal-close" onclick="exploreQuizManager.closeShareModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="share-info-banner">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>L∆∞u √Ω:</strong> B·∫°n c√≥ th·ªÉ ƒë·∫∑t t√™n v√† m√¥ t·∫£ m·ªõi cho b√†i chia s·∫ª.
                        B√†i g·ªëc c·ªßa b·∫°n s·∫Ω kh√¥ng b·ªã thay ƒë·ªïi.
                    </div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label>
                        <i class="fas fa-user-circle"></i>
                        T√™n c·ªßa b·∫°n <span style="color: red;">*</span>
                    </label>
                    <input type="text" id="share-user-name" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n..." class="modal-input">
                    <small style="display: block; margin-top: 5px; color: var(--text-secondary);">
                        T√™n n√†y s·∫Ω hi·ªÉn th·ªã cho m·ªçi ng∆∞·ªùi bi·∫øt ai ƒë√£ chia s·∫ª
                    </small>
                </div>

                <div class="form-group">
                    <label>
                        <i class="fas fa-heading"></i>
                        T√™n ƒë·ªÅ thi <span style="color: red;">*</span>
                    </label>
                    <input type="text" id="share-quiz-title" placeholder="Nh·∫≠p t√™n ƒë·ªÅ thi..." class="modal-input">
                    <small style="display: block; margin-top: 5px; color: var(--text-secondary);">
                        ƒê·∫∑t t√™n m·ªõi cho ƒë·ªÅ thi khi chia s·∫ª (kh√°c v·ªõi t√™n g·ªëc)
                    </small>
                </div>

                <div class="form-group">
                    <label>
                        <i class="fas fa-tags"></i>
                        Danh m·ª•c <span style="color: red;">*</span>
                    </label>
                    <select id="share-quiz-category" class="modal-select">
                        <option value="">-- Ch·ªçn m√¥n h·ªçc --</option>
                        <option value="toan-cao-cap">üìê To√°n cao c·∫•p</option>
                        <option value="vat-ly-dai-cuong">‚öóÔ∏è V·∫≠t l√Ω ƒë·∫°i c∆∞∆°ng</option>
                        <option value="hoa-dai-cuong">üß™ H√≥a ƒë·∫°i c∆∞∆°ng</option>
                        <option value="sinh-hoc-dai-cuong">üß¨ Sinh h·ªçc ƒë·∫°i c∆∞∆°ng</option>
                        <option value="tieng-anh">üåç Ti·∫øng Anh</option>
                        <option value="tin-hoc-dai-cuong">üíª Tin h·ªçc ƒë·∫°i c∆∞∆°ng</option>
                        <option value="kinh-te-hoc">üí∞ Kinh t·∫ø h·ªçc</option>
                        <option value="quan-tri-kinh-doanh">üìä Qu·∫£n tr·ªã kinh doanh</option>
                        <option value="ke-toan">üìã K·∫ø to√°n</option>
                        <option value="marketing">üìà Marketing</option>
                        <option value="luat-hoc">‚öñÔ∏è Lu·∫≠t h·ªçc</option>
                        <option value="tam-ly-hoc">üß† T√¢m l√Ω h·ªçc</option>
                        <option value="giao-duc-hoc">üéì Gi√°o d·ª•c h·ªçc</option>
                        <option value="ngoai-ngu">üó£Ô∏è Ngo·∫°i ng·ªØ</option>
                        <option value="cong-nghe-thong-tin">üîß C√¥ng ngh·ªá th√¥ng tin</option>
                        <option value="dien-tu-vien-thong">üì° ƒêi·ªán t·ª≠ vi·ªÖn th√¥ng</option>
                        <option value="co-khi">‚öôÔ∏è C∆° kh√≠</option>
                        <option value="xay-dung">üèóÔ∏è X√¢y d·ª±ng</option>
                        <option value="y-hoc">üè• Y h·ªçc</option>
                        <option value="duoc-hoc">üíä D∆∞·ª£c h·ªçc</option>
                        <option value="nong-nghiep">üåæ N√¥ng nghi·ªáp</option>
                        <option value="thuy-san">üêü Th·ªßy s·∫£n</option>
                        <option value="lam-nghiep">üå≤ L√¢m nghi·ªáp</option>
                        <option value="moi-truong">üåç M√¥i tr∆∞·ªùng</option>
                        <option value="khac">üìö Kh√°c</option>
                    </select>
                    <small style="display: block; margin-top: 5px; color: var(--text-secondary);">
                        Ch·ªçn danh m·ª•c ph√π h·ª£p ƒë·ªÉ ng∆∞·ªùi kh√°c d·ªÖ t√¨m th·∫•y
                    </small>
                </div>

                <div class="form-group">
                    <label>
                        <i class="fas fa-align-left"></i>
                        M√¥ t·∫£ ƒë·ªÅ thi
                    </label>
                    <textarea id="share-quiz-description" placeholder="Nh·∫≠p m√¥ t·∫£ cho ƒë·ªÅ thi..." class="modal-textarea"
                        rows="4"></textarea>
                    <small style="display: block; margin-top: 5px; color: var(--text-secondary);">
                        M√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ n·ªôi dung ƒë·ªÅ thi
                    </small>
                </div>

                <div class="share-quiz-info">
                    <div class="info-item">
                        <i class="fas fa-question-circle"></i>
                        <span>S·ªë c√¢u h·ªèi: <strong id="share-quiz-count">0</strong></span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-calendar"></i>
                        <span>Ng√†y chia s·∫ª: <strong id="share-quiz-date">H√¥m nay</strong></span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-clock"></i>
                        <span>Th·ªùi gian: <strong id="share-quiz-time">B√¢y gi·ªù</strong></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="exploreQuizManager.confirmShareQuiz()">
                    <i class="fas fa-share-alt"></i>
                    Chia S·∫ª Ngay
                </button>
                <button class="btn-secondary" onclick="exploreQuizManager.closeShareModal()">
                    <i class="fas fa-times"></i>
                    H·ªßy
                </button>
            </div>
        </div>
    </div>

    <script src="src/js/config/cloud-storage.js"></script>
    <script>
        window.firebaseQuizManager = new CloudQuizManager();
        window.isFirebaseInitialized = true;
        window.firebaseQuizManager.startAutoSync();
        console.log('‚úÖ Cloud storage ready');
    </script>

    <!-- Community Sharing - Kh√¥ng c·∫ßn server, kh√¥ng c·∫ßn c√πng m·∫°ng -->
    <script src="src/js/features/community-share.js"></script>

    <!-- Supabase Integration - Cloud sharing -->
    <script type="module" src="src/js/config/supabase-config.js"></script>

    <!-- Smart Question Parser - Nh·∫≠n di·ªán t·ª± ƒë·ªông nhi·ªÅu format -->
    <script src="src/js/core/smart-question-parser.js"></script>

    <!-- Sound Manager - Qu·∫£n l√Ω √¢m thanh (MUST BE BEFORE script.js) -->
    <script src="src/js/features/sound-manager.js"></script>

    <script src="src/js/core/script.js"></script>
    <script src="archive/old-versions/script-modern.js"></script>
    <!-- PATCH: Fix updateAnswerModern - MUST BE RIGHT AFTER script-modern.js -->
    <script src="archive/fixes/PATCH_UPDATE_ANSWER.js"></script>
    <script src="archive/old-versions/script-updated.js"></script>
    <script src="src/js/features/ai-quiz.js"></script>
    <script src="src/js/features/ai-file-handler.js"></script>
    <script src="src/js/features/mobile-menu.js"></script>
    <script src="src/js/features/streak-tracker.js"></script>
    <script src="src/js/features/explore-quiz.js"></script>

    <!-- FORCE SUPABASE FIX V2 - MUST BE RIGHT AFTER explore-quiz.js -->
    <script src="archive/fixes/FIX_FORCE_SUPABASE_V2.js"></script>

    <script src="src/js/admin/admin-manager.js"></script>

    <!-- Analytics Tracker -->
    <script src="src/js/admin/analytics-tracker.js"></script>

    <!-- Admin Analytics Dashboard -->
    <script src="src/js/admin/admin-analytics.js"></script>

    <!-- Room Manager -->
    <script src="src/js/room/room-manager.js"></script>

    <!-- FINAL ABSOLUTE FIX: Ch·∫∑n PATCH request, b·∫£o v·ªá currentQuiz 100% -->
    <script src="archive/fixes/FINAL_ABSOLUTE_FIX.js"></script>

    <script>
        // Override renderQuiz with modern version for 3-column layout
        document.addEventListener('DOMContentLoaded', function () {
            if (typeof QuizManager !== 'undefined') {
                // Override methods to use modern 3-column layout
                QuizManager.prototype.renderQuiz = QuizManager.prototype.renderQuizModern;
                QuizManager.prototype.startTimer = QuizManager.prototype.startTimerModern;
                QuizManager.prototype.updateProgressBar = QuizManager.prototype.updateProgressBarModern;
                QuizManager.prototype.updateAnswer = QuizManager.prototype.updateAnswerModern;

                console.log('‚úÖ Modern quiz layout activated!');
            }

            // Initialize Analytics Dashboard when clicking Analytics tab
            const analyticsNavItem = document.getElementById('analytics-nav-item');
            if (analyticsNavItem) {
                analyticsNavItem.addEventListener('click', function () {
                    // Wait for tab to switch
                    setTimeout(() => {
                        if (window.adminAnalytics) {
                            window.adminAnalytics.loadDashboard();
                        }
                    }, 100);
                });
            }
        });
    </script>

    <!-- ROOM QUIZ VALIDATION & UPGRADE - MUST BE AFTER ROOM MANAGER -->
    <script src="src/js/room/room-quiz-validation-upgrade.js"></script>

    <!-- COMPLETE PROTECTION FOR ROOM QUIZ - MUST BE ABSOLUTE LAST -->
    <script src="archive/fixes/fix-room-quiz-complete-protection.js"></script>

    <!-- ABSOLUTE QUIZ PROTECTION - MUST BE VERY LAST -->
    <script src="src/js/core/ABSOLUTE_QUIZ_PROTECTION.js"></script>

    <!-- üéÑ HI·ªÜU ·ª®NG NOEL & T·∫æT 2026 üéä -->
    <script src="src/js/features/newyear-effects.js"></script>

    <!-- üéÑ HI·ªÜU ·ª®NG TUY·∫æT R∆†I ƒê·ªöN GI·∫¢N -->
    <!-- <script src="archive/deprecated/simple-snow.js"></script> DISABLED - File not found -->

    <!-- üê± HI·ªÜU ·ª®NG CH√ÄO M·ª™NG CON M√àO -->
    <script src="src/js/features/cat-welcome.js"></script>

    <!-- üéØ GIAO DI·ªÜN L√ÄM B√ÄI M∆Ø·ª¢T M√Ä -->
    <script src="src/js/core/smooth-quiz-effects.js"></script>

    <!-- Audio for answer selection -->
    <audio id="answer-sound" preload="auto">
        <source src="assets/audio/chinhxac.wav" type="audio/wav">
    </audio>

    <!-- Audio for quiz results -->
    <audio id="success-sound" preload="auto">
        <source src="assets/audio/√¢m thanh ch√∫c m·ª´ng.wav" type="audio/wav">
    </audio>
    <audio id="fail-sound" preload="auto">
        <source src="assets/audio/saidapan.wav" type="audio/wav">
    </audio>

    <!-- CSS cho h·ªá th·ªëng danh m·ª•c -->
    <style>
        /* Modal Select Styling */
        .modal-select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color, #e1e5e9);
            border-radius: 8px;
            background: var(--bg-color, #ffffff);
            color: var(--text-color, #2d3748);
            font-size: 16px;
            font-family: inherit;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
        }

        .modal-select:focus {
            outline: none;
            border-color: var(--primary-color, #4f46e5);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        /* Category Filter Section - Compact Design */
        .category-filter-compact {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            padding: 0 20px;
        }

        .filter-compact-wrapper {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-width: 280px;
        }

        .category-select-compact {
            padding: 10px 14px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            color: var(--text-color, #2d3748);
            font-size: 14px;
            font-family: inherit;
            font-weight: 500;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23667eea' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 10px center;
            background-repeat: no-repeat;
            background-size: 14px;
            padding-right: 35px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .category-select-compact:focus {
            outline: none;
            border-color: var(--primary-color, #667eea);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        .category-select-compact:hover {
            border-color: var(--primary-color, #667eea);
            background: rgba(255, 255, 255, 0.15);
        }

        .filter-result-compact {
            text-align: right;
            font-size: 12px;
            color: var(--text-secondary, #64748b);
            font-weight: 500;
        }

        .filter-result-compact span {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 4px 8px;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .category-filter-compact {
                justify-content: center;
            }

            .filter-compact-wrapper {
                max-width: 100%;
                width: 100%;
            }

            .filter-result-compact {
                text-align: center;
            }
        }

        /* Dark theme support */
        @media (prefers-color-scheme: dark) {
            .category-select-compact {
                background: rgba(45, 55, 72, 0.8);
                border-color: rgba(255, 255, 255, 0.1);
                color: #e2e8f0;
            }

            .filter-result-compact span {
                background: rgba(45, 55, 72, 0.8);
                border-color: rgba(255, 255, 255, 0.1);
                color: #e2e8f0;
            }
        }

        /* Shared Quiz Category */
        .shared-quiz-category {
            background: var(--primary-color, #4f46e5);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
            margin-left: auto;
        }

        .shared-quiz-category i {
            font-size: 10px;
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            .category-filter-section {
                background: #1a202c;
                border-color: #2d3748;
            }

            .category-select {
                background: #2d3748;
                border-color: #4a5568;
                color: #e2e8f0;
            }

            .filter-result-count span {
                background: #2d3748;
                border-color: #4a5568;
                color: #e2e8f0;
            }

            .modal-select {
                background: #2d3748;
                border-color: #4a5568;
                color: #e2e8f0;
            }
        }

        /* Shared Quizzes Section - Horizontal Layout */
        .shared-quizzes-section {
            margin-top: 20px;
            width: 100%;
            max-width: 100%;
            overflow: hidden;
        }

        .quiz-section {
            margin-bottom: 40px;
            width: 100%;
            max-width: 100%;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding: 0 8px;
        }

        .section-header h3 {
            color: var(--text-color, #2d3748);
            font-size: 22px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0;
        }

        .section-header h3 i {
            color: var(--primary-color, #667eea);
            font-size: 20px;
        }

        .btn-see-more {
            background: rgba(102, 126, 234, 0.08);
            border: 2px solid rgba(102, 126, 234, 0.15);
            color: var(--primary-color, #667eea);
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
        }

        .btn-see-more:hover {
            background: var(--primary-color, #667eea);
            color: white;
            border-color: var(--primary-color, #667eea);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        /* CRITICAL: Container wrapper to prevent layout stretching */
        .quiz-container-wrapper {
            width: 100% !important;
            max-width: 100% !important;
            height: 450px !important;
            overflow: hidden !important;
            position: relative;
            border-radius: 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.7));
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
            contain: layout style !important;
        }

        border-radius: 12px;
        background: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        contain: layout style !important;
        }

        .quiz-horizontal-scroll {
            display: flex;
            gap: 24px;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 20px;
            scroll-behavior: smooth;
            scrollbar-width: thin;
            flex-wrap: nowrap;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        .quiz-horizontal-scroll::-webkit-scrollbar {
            height: 10px;
        }

        .quiz-horizontal-scroll::-webkit-scrollbar-track {
            background: rgba(102, 126, 234, 0.08);
            border-radius: 12px;
        }

        .quiz-horizontal-scroll::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-color, #667eea), var(--secondary-color, #764ba2));
            border-radius: 12px;
            border: 2px solid transparent;
            background-clip: content-box;
        }

        .quiz-horizontal-scroll::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-dark, #5a67d8), var(--secondary-dark, #6b46c1));
            background-clip: content-box;
        }

        .quiz-card-horizontal {
            min-width: 320px;
            max-width: 320px;
            width: 320px;
            height: auto;
            min-height: 360px;
            flex-shrink: 0;
            background: var(--card-bg, #ffffff);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid var(--border-color, #e1e5e9);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            backdrop-filter: blur(10px);
        }

        .quiz-card-horizontal:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 32px rgba(102, 126, 234, 0.15);
            border-color: var(--primary-color, #667eea);
        }

        .quiz-card-horizontal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(135deg, var(--primary-color, #667eea), var(--secondary-color, #764ba2));
            border-radius: 20px 20px 0 0;
        }

        .quiz-card-horizontal::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            transition: all 0.4s ease;
            opacity: 0;
        }

        .quiz-card-horizontal:hover::after {
            opacity: 1;
            transform: scale(1.5);
        }

        /* üéØ ENHANCED STYLES FOR LONG TEXT CARDS */
        .quiz-card-long-text {
            border-left: 4px solid #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.02), rgba(255, 255, 255, 0.98));
        }

        .quiz-card-long-text .quiz-card-title {
            font-weight: 600;
            color: #2d3748;
        }

        .quiz-card-long-text::before {
            background: linear-gradient(135deg, #667eea, #764ba2, #48bb78);
            height: 5px;
        }

        /* üîß ENSURE BUTTON VISIBILITY */
        .quiz-card-practice-action,
        .quiz-card-actions {
            margin-top: auto;
            flex-shrink: 0;
            position: relative;
            z-index: 10;
            padding-top: 8px;
        }

        .quiz-card-content {
            display: flex;
            flex-direction: column;
            height: 100%;
            justify-content: space-between;
        }

        /* üì± RESPONSIVE IMPROVEMENTS FOR LONG TEXT */
        @media (max-width: 480px) {
            .quiz-card-long-text .quiz-card-title {
                font-size: 13px;
                line-height: 1.25;
            }
        }

        @media (max-width: 360px) {
            .quiz-card-long-text .quiz-card-title {
                font-size: 12px;
                line-height: 1.2;
            }
        }

        .quiz-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
            position: relative;
            z-index: 2;
        }

        .quiz-card-category {
            background: linear-gradient(135deg, var(--primary-color, #667eea), var(--secondary-color, #764ba2));
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
            backdrop-filter: blur(10px);
        }

        .quiz-card-stats {
            display: flex;
            gap: 12px;
            font-size: 13px;
            color: var(--text-secondary, #64748b);
        }

        .quiz-card-stat {
            display: flex;
            align-items: center;
            gap: 4px;
            background: var(--bg-secondary, #f8fafc);
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 500;
        }

        .quiz-card-stat i {
            color: var(--primary-color, #667eea);
        }

        .quiz-card-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-color, #2d3748);
            margin-bottom: 14px;
            line-height: 1.25;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            height: auto;
            min-height: 48px;
            max-height: 72px;
            position: relative;
            z-index: 2;
            word-wrap: break-word;
            word-break: break-word;
            hyphens: auto;
        }

        .quiz-card-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 0;
            overflow: hidden;
        }

        .quiz-card-meta {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 16px;
            font-size: 14px;
            color: var(--text-secondary, #64748b);
        }

        .quiz-card-meta-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .quiz-card-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .quiz-card-meta-item i {
            color: var(--primary-color, #667eea);
            width: 16px;
        }

        .quiz-card-actions {
            display: flex;
            gap: 12px;
            position: relative;
            z-index: 2;
            margin-bottom: 8px;
            justify-content: center;
            flex-shrink: 0;
        }

        .quiz-card-actions-secondary {
            display: flex;
            gap: 12px;
            position: relative;
            z-index: 2;
        }

        .quiz-card-practice-action {
            margin-top: 6px;
            position: relative;
            z-index: 2;
            flex-shrink: 0;
        }

        .btn-quiz-practice-full {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            border-radius: 25px;
            font-size: 15px;
            font-weight: 700;
            padding: 14px 20px;
            border: none;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn-quiz-practice-full:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
        }

        .btn-quiz-practice-full::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s;
        }

        .btn-quiz-practice-full:hover::before {
            left: 100%;
        }

        .btn-quiz-practice-full i {
            background: rgba(255, 255, 255, 0.25);
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .btn-quiz-action {
            flex: 1;
            padding: 14px 18px;
            border: none;
            border-radius: 14px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }

        .btn-quiz-primary {
            background: linear-gradient(135deg, var(--primary-color, #667eea), var(--secondary-color, #764ba2));
            color: white;
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.35);
        }

        .btn-quiz-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.45);
        }

        .btn-quiz-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-quiz-primary:hover::before {
            left: 100%;
        }

        .btn-quiz-secondary {
            background: rgba(102, 126, 234, 0.08);
            color: var(--primary-color, #667eea);
            border: 2px solid rgba(102, 126, 234, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 600;
            min-width: 120px;
        }

        .btn-quiz-secondary:hover {
            background: rgba(102, 126, 234, 0.12);
            border-color: var(--primary-color, #667eea);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
        }

        .quiz-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 40px;
            color: var(--text-secondary, #64748b);
            font-size: 14px;
        }

        .quiz-loading i {
            color: var(--primary-color, #667eea);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary, #64748b);
        }

        .empty-state i {
            font-size: 48px;
            color: var(--border-color, #e1e5e9);
            margin-bottom: 16px;
        }

        .empty-state h3 {
            font-size: 18px;
            margin-bottom: 8px;
            color: var(--text-color, #2d3748);
        }

        /* CRITICAL: Override any conflicting styles */
        #trending-quizzes,
        #latest-quizzes {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            overflow-x: auto;
            overflow-y: hidden;
        }

        #trending-quizzes .quiz-card-horizontal,
        #latest-quizzes .quiz-card-horizontal {
            flex: 0 0 320px;
            width: 320px;
            height: 360px;
        }

        /* CRITICAL: Prevent explore tab from stretching - MINIMAL CSS */
        #explore-tab {
            overflow-x: hidden;
        }

        /* CRITICAL: Force all sections to stay within viewport */
        .user-name-section,
        .room-join-section,
        .category-filter-compact,
        .explore-header,
        .shared-quizzes-section {
            width: 100% !important;
            max-width: 100% !important;
            box-sizing: border-box !important;
        }

        /* MINIMAL: Force main layout constraints - ONLY FOR EXPLORE */

        /* Responsive - Adaptive Layout System */
        @media (max-width: 360px) {
            .quiz-container-wrapper {
                height: 360px !important;
                max-width: 100% !important;
                margin: 0 8px;
            }

            .quiz-card-horizontal {
                min-width: 260px !important;
                max-width: 260px !important;
                width: 260px !important;
                height: 320px !important;
                padding: 14px !important;
            }

            .quiz-card-title {
                font-size: 14px !important;
                line-height: 1.2 !important;
                max-height: 67px !important;
                -webkit-line-clamp: 4 !important;
                height: auto !important;
                margin-bottom: 10px;
            }

            .quiz-card-meta {
                font-size: 11px;
                gap: 6px;
            }

            .btn-quiz-secondary {
                padding: 6px 12px;
                font-size: 11px;
                min-width: 80px;
            }

            .btn-quiz-practice-full {
                padding: 8px 12px;
                font-size: 12px;
            }

            .btn-quiz-practice-full i {
                width: 20px;
                height: 20px;
                font-size: 10px;
            }
        }

        @media (min-width: 361px) and (max-width: 414px) {
            .quiz-container-wrapper {
                height: 380px !important;
                max-width: 100% !important;
                margin: 0 10px;
            }

            .quiz-card-horizontal {
                min-width: 280px !important;
                max-width: 280px !important;
                width: 280px !important;
                height: 340px !important;
                padding: 16px !important;
            }

            .quiz-card-title {
                font-size: 15px !important;
                line-height: 1.25 !important;
                max-height: 75px !important;
                -webkit-line-clamp: 4 !important;
                height: auto !important;
                margin-bottom: 12px;
            }

            .quiz-card-meta {
                font-size: 12px;
                gap: 7px;
            }

            .btn-quiz-secondary {
                padding: 8px 14px;
                font-size: 12px;
                min-width: 90px;
            }

            .btn-quiz-practice-full {
                padding: 10px 14px;
                font-size: 13px;
            }

            .btn-quiz-practice-full i {
                width: 22px;
                height: 22px;
                font-size: 11px;
            }
        }

        @media (min-width: 415px) and (max-width: 768px) {
            .quiz-container-wrapper {
                height: 400px !important;
                max-width: 100% !important;
                margin: 0 15px;
            }

            .quiz-card-horizontal {
                min-width: 320px !important;
                max-width: 320px !important;
                width: 320px !important;
                height: 360px !important;
                padding: 18px !important;
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .section-header h3 {
                font-size: 18px;
            }

            .quiz-card-title {
                font-size: 17px;
                height: 46px;
            }

            .quiz-card-meta {
                gap: 8px;
                margin-bottom: 14px;
                font-size: 13px;
            }

            .btn-quiz-action {
                padding: 10px 14px;
                font-size: 13px;
            }

            .btn-quiz-practice-full {
                padding: 12px 18px;
                font-size: 14px;
            }

            .btn-quiz-practice-full i {
                width: 26px;
                height: 26px;
                font-size: 13px;
            }
        }

        padding: 4px 8px;
        }

        .btn-quiz-action {
            padding: 8px 10px;
            font-size: 12px;
        }
        }
    </style>

    <script>
        // üîß DEBUG: Force horizontal layout
        document.addEventListener('DOMContentLoaded', function () {
            console.log('üîß Applying horizontal layout fixes...');

            // Force horizontal scroll containers
            const containers = document.querySelectorAll('#trending-quizzes, #latest-quizzes');
            containers.forEach(container => {
                if (container) {
                    container.style.display = 'flex';
                    container.style.flexDirection = 'row';
                    container.style.flexWrap = 'nowrap';
                    container.style.overflowX = 'auto';
                    container.style.overflowY = 'hidden';
                    container.style.gap = '24px';
                    console.log('‚úÖ Fixed container:', container.id);
                }
            });

            // Force card dimensions
            const cards = document.querySelectorAll('.quiz-card-horizontal');
            // Apply responsive card dimensions
            const applyResponsiveCardDimensions = (card) => {
                const screenWidth = window.innerWidth;

                if (screenWidth <= 480) {
                    // Mobile small
                    card.style.flex = '0 0 280px';
                    card.style.width = '280px';
                    card.style.height = '320px';
                    card.style.minWidth = '280px';
                    card.style.maxWidth = '280px';
                } else if (screenWidth <= 768) {
                    // Mobile/Tablet
                    card.style.flex = '0 0 300px';
                    card.style.width = '300px';
                    card.style.height = '360px';
                    card.style.minWidth = '300px';
                    card.style.maxWidth = '300px';
                } else {
                    // Desktop
                    card.style.flex = '0 0 340px';
                    card.style.width = '340px';
                    card.style.height = '390px';
                    card.style.minWidth = '340px';
                    card.style.maxWidth = '340px';
                }
            };

            cards.forEach(card => {
                applyResponsiveCardDimensions(card);
            });

            console.log('‚úÖ Applied fixes to', cards.length, 'cards');

            // üéØ ADAPTIVE LAYOUT SYSTEM - T·ª± ƒë·ªông nh·∫≠n di·ªán v√† ƒëi·ªÅu ch·ªânh
            const initAdaptiveLayout = () => {
                const screenWidth = window.innerWidth;
                const screenHeight = window.innerHeight;
                const devicePixelRatio = window.devicePixelRatio || 1;

                console.log(`üì± Device Info: ${screenWidth}x${screenHeight}, DPR: ${devicePixelRatio}`);

                // T√≠nh to√°n k√≠ch th∆∞·ªõc t·ªëi ∆∞u d·ª±a tr√™n m√†n h√¨nh
                const calculateOptimalCardSize = () => {
                    const availableWidth = screenWidth - 60; // Tr·ª´ padding v√† margin
                    let cardWidth, cardHeight, containerHeight;

                    if (screenWidth <= 360) {
                        // ƒêi·ªán tho·∫°i r·∫•t nh·ªè (iPhone SE, Galaxy S5)
                        cardWidth = Math.min(260, availableWidth - 40);
                        cardHeight = 300;
                        containerHeight = 340;
                    } else if (screenWidth <= 414) {
                        // ƒêi·ªán tho·∫°i nh·ªè (iPhone 6/7/8, Galaxy S8)
                        cardWidth = Math.min(280, availableWidth - 40);
                        cardHeight = 320;
                        containerHeight = 360;
                    } else if (screenWidth <= 768) {
                        // ƒêi·ªán tho·∫°i l·ªõn/Tablet nh·ªè
                        cardWidth = Math.min(320, availableWidth - 40);
                        cardHeight = 360;
                        containerHeight = 400;
                    } else if (screenWidth <= 1024) {
                        // Tablet
                        cardWidth = 340;
                        cardHeight = 380;
                        containerHeight = 420;
                    } else {
                        // Desktop
                        cardWidth = 340;
                        cardHeight = 390;
                        containerHeight = 450;
                    }

                    return { cardWidth, cardHeight, containerHeight };
                };

                const { cardWidth, cardHeight, containerHeight } = calculateOptimalCardSize();

                // √Åp d·ª•ng k√≠ch th∆∞·ªõc container
                const containers = document.querySelectorAll('.quiz-container-wrapper');
                containers.forEach(container => {
                    container.style.height = `${containerHeight}px`;
                    container.style.maxWidth = `calc(100vw - 20px)`;
                });

                // √Åp d·ª•ng k√≠ch th∆∞·ªõc card
                const allCards = document.querySelectorAll('.quiz-card-horizontal');
                allCards.forEach(card => {
                    card.style.flex = `0 0 ${cardWidth}px`;
                    card.style.width = `${cardWidth}px`;
                    card.style.height = `${cardHeight}px`;
                    card.style.minWidth = `${cardWidth}px`;
                    card.style.maxWidth = `${cardWidth}px`;

                    // ƒêi·ªÅu ch·ªânh padding d·ª±a tr√™n k√≠ch th∆∞·ªõc
                    if (cardWidth <= 260) {
                        card.style.padding = '14px';
                    } else if (cardWidth <= 280) {
                        card.style.padding = '16px';
                    } else {
                        card.style.padding = '18px';
                    }
                });

                // ƒêi·ªÅu ch·ªânh scroll padding
                const scrollContainers = document.querySelectorAll('.quiz-horizontal-scroll');
                scrollContainers.forEach(scroll => {
                    if (screenWidth <= 414) {
                        scroll.style.padding = '12px 8px 16px 8px';
                        scroll.style.gap = '12px';
                    } else if (screenWidth <= 768) {
                        scroll.style.padding = '16px 12px 20px 12px';
                        scroll.style.gap = '16px';
                    } else {
                        scroll.style.padding = '20px 16px 24px 16px';
                        scroll.style.gap = '20px';
                    }
                });

                // üìù ENHANCED DYNAMIC CONTENT-AWARE LAYOUT SYSTEM - T·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh theo n·ªôi dung
                const optimizeContentAwareLayout = () => {
                    const cards = document.querySelectorAll('.quiz-card-horizontal');
                    if (cards.length === 0) return;

                    console.log(`üîß Optimizing ${cards.length} cards for screen width: ${screenWidth}px`);

                    cards.forEach((card, index) => {
                        const title = card.querySelector('.quiz-card-title');
                        const originalText = title ? (title.textContent || title.innerText).trim() : '';

                        if (!originalText) return;

                        // üéØ SMART TEXT ANALYSIS - Ph√¢n t√≠ch th√¥ng minh ƒë·ªô d√†i text
                        const analyzeTextComplexity = (text, screenWidth) => {
                            // T√≠nh to√°n font size v√† card width d·ª±a tr√™n thi·∫øt b·ªã
                            let fontSize, cardWidth, baseHeight;

                            if (screenWidth <= 360) {
                                fontSize = 14;
                                cardWidth = 260;
                                baseHeight = 320;
                            } else if (screenWidth <= 414) {
                                fontSize = 15;
                                cardWidth = 280;
                                baseHeight = 340;
                            } else if (screenWidth <= 768) {
                                fontSize = 16;
                                cardWidth = 320;
                                baseHeight = 380;
                            } else {
                                fontSize = 17;
                                cardWidth = 340;
                                baseHeight = 390;
                            }

                            // T√≠nh to√°n ch√≠nh x√°c s·ªë k√Ω t·ª± tr√™n m·ªói d√≤ng
                            const charWidth = fontSize * 0.55; // ∆Ø·ªõc t√≠nh width c·ªßa 1 k√Ω t·ª±
                            const availableWidth = cardWidth - 40; // Tr·ª´ padding
                            const charsPerLine = Math.floor(availableWidth / charWidth);

                            // T√≠nh s·ªë d√≤ng th·ª±c t·∫ø c·∫ßn thi·∫øt
                            const words = text.split(' ');
                            let currentLineLength = 0;
                            let lines = 1;

                            words.forEach(word => {
                                if (currentLineLength + word.length + 1 > charsPerLine) {
                                    lines++;
                                    currentLineLength = word.length;
                                } else {
                                    currentLineLength += word.length + 1;
                                }
                            });

                            // Gi·ªõi h·∫°n t·ªëi ƒëa 6 d√≤ng ƒë·ªÉ kh√¥ng qu√° d√†i
                            const maxLines = Math.min(lines, 6);

                            // T√≠nh chi·ªÅu cao title
                            const lineHeight = fontSize * 1.3;
                            const titleHeight = maxLines * lineHeight + 8; // Th√™m margin

                            // T√≠nh t·ªïng chi·ªÅu cao card
                            const headerHeight = 45; // Category + stats
                            const metaHeight = 65;    // User info + questions
                            const actionsHeight = 50; // Buttons
                            const padding = 40;       // Top + bottom padding

                            const totalCardHeight = Math.max(
                                baseHeight,
                                headerHeight + titleHeight + metaHeight + actionsHeight + padding
                            );

                            return {
                                cardHeight: totalCardHeight,
                                titleHeight: titleHeight,
                                fontSize: fontSize,
                                lines: maxLines,
                                isLongText: lines > 2,
                                complexity: text.length > 50 ? 'high' : text.length > 30 ? 'medium' : 'low'
                            };
                        };

                        const analysis = analyzeTextComplexity(originalText, screenWidth);

                        // üé® APPLY DYNAMIC STYLING - √Åp d·ª•ng style ƒë·ªông
                        card.style.height = `${analysis.cardHeight}px`;
                        card.style.minHeight = `${analysis.cardHeight}px`;

                        if (title) {
                            // Reset t·∫•t c·∫£ styles tr∆∞·ªõc
                            title.style.fontSize = `${analysis.fontSize}px`;
                            title.style.lineHeight = '1.3';
                            title.style.height = 'auto';
                            title.style.maxHeight = `${analysis.titleHeight}px`;
                            title.style.minHeight = `${analysis.fontSize * 1.3 * 2}px`; // T·ªëi thi·ªÉu 2 d√≤ng
                            title.style.webkitLineClamp = analysis.lines.toString();
                            title.style.lineClamp = analysis.lines.toString();
                            title.style.display = '-webkit-box';
                            title.style.webkitBoxOrient = 'vertical';
                            title.style.overflow = 'hidden';
                            title.style.wordBreak = 'break-word';
                            title.style.hyphens = 'auto';

                            // Th√™m visual indicator cho text d√†i
                            if (analysis.isLongText) {
                                title.setAttribute('title', `üìñ ${originalText}`);
                                title.style.cursor = 'help';
                                card.classList.add('quiz-card-long-text');
                            } else {
                                card.classList.remove('quiz-card-long-text');
                            }
                        }

                        // üîç ENSURE BUTTON VISIBILITY - ƒê·∫£m b·∫£o n√∫t lu√¥n hi·ªÉn th·ªã
                        const actions = card.querySelector('.quiz-card-practice-action, .quiz-card-actions');
                        if (actions) {
                            actions.style.marginTop = 'auto';
                            actions.style.flexShrink = '0';
                            actions.style.position = 'relative';
                            actions.style.zIndex = '10';
                        }

                        console.log(`üìè Card ${index + 1}: "${originalText.substring(0, 25)}..." -> ${analysis.cardHeight}px (${analysis.lines} lines, ${analysis.complexity} complexity)`);
                    });

                    // üì¶ ADJUST CONTAINER HEIGHT - ƒêi·ªÅu ch·ªânh chi·ªÅu cao container
                    const cardHeights = Array.from(cards).map(card => {
                        const height = parseInt(card.style.height) || parseInt(getComputedStyle(card).height) || 390;
                        return height;
                    });

                    const maxCardHeight = Math.max(...cardHeights);
                    const containerPadding = 40;
                    const requiredContainerHeight = maxCardHeight + containerPadding;

                    const containers = document.querySelectorAll('.quiz-container-wrapper');
                    containers.forEach(container => {
                        container.style.height = `${requiredContainerHeight}px`;
                        container.style.minHeight = `${requiredContainerHeight}px`;
                    });

                    console.log(`üì¶ Container optimized: ${requiredContainerHeight}px (max card: ${maxCardHeight}px, ${cards.length} cards)`);

                    // üéØ PERFORMANCE OPTIMIZATION - Trigger reflow once
                    cards[0]?.offsetHeight; // Force reflow
                };

                // √Åp d·ª•ng layout th√¥ng minh
                optimizeContentAwareLayout();

                console.log(`üéØ Applied adaptive layout: ${cardWidth}x${cardHeight}px cards, ${containerHeight}px container`);
            };

            // üåê EXPOSE FUNCTIONS TO GLOBAL SCOPE for external access
            window.optimizeContentAwareLayout = optimizeContentAwareLayout;
            window.initAdaptiveLayout = initAdaptiveLayout;

            // Kh·ªüi t·∫°o adaptive layout
            initAdaptiveLayout();

            // L·∫Øng nghe thay ƒë·ªïi k√≠ch th∆∞·ªõc m√†n h√¨nh
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    initAdaptiveLayout();
                }, 250);
            });

            // L·∫Øng nghe thay ƒë·ªïi orientation
            window.addEventListener('orientationchange', () => {
                setTimeout(() => {
                    initAdaptiveLayout();
                }, 500);
            });

            // üß™ Add sample quiz data if no quizzes are loaded after 3 seconds
            setTimeout(() => {
                const trendingContainer = document.getElementById('trending-quizzes');
                const latestContainer = document.getElementById('latest-quizzes');

                if (trendingContainer && trendingContainer.querySelector('.quiz-loading')) {
                    console.log('üß™ Loading sample quiz data...');

                    const sampleQuizHTML = `
                        <div class="quiz-card-horizontal" data-quiz-id="sample1">
                            <div class="quiz-card-header">
                                <div class="quiz-card-category">
                                    <i class="fas fa-calculator"></i>
                                    To√°n cao c·∫•p
                                </div>
                                <div class="quiz-card-stats">
                                    <div class="quiz-card-stat">
                                        <i class="fas fa-eye"></i>
                                        <span>125</span>
                                    </div>
                                    <div class="quiz-card-stat">
                                        <i class="fas fa-fire"></i>
                                        <span>89</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="quiz-card-content">
                                <div class="quiz-card-title">Gi·∫£i t√≠ch 1 - Gi·ªõi h·∫°n v√† Li√™n t·ª•c</div>
                                
                                <div class="quiz-card-meta">
                                    <div class="quiz-card-meta-row">
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-user"></i>
                                            <span>Nguy·ªÖn VƒÉn A</span>
                                        </div>
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-question-circle"></i>
                                            <span>25 c√¢u</span>
                                        </div>
                                    </div>
                                    <div class="quiz-card-meta-row">
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-clock"></i>
                                            <span>2 gi·ªù tr∆∞·ªõc</span>
                                        </div>
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-calendar"></i>
                                            <span>03/01/2026</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="quiz-card-actions">
                                    <button class="btn-quiz-action btn-quiz-primary">
                                        <i class="fas fa-play"></i>
                                        <span>V√†o thi</span>
                                    </button>
                                    <button class="btn-quiz-action btn-quiz-secondary">
                                        <i class="fas fa-info-circle"></i>
                                        <span>Chi ti·∫øt</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-card-horizontal" data-quiz-id="sample2">
                            <div class="quiz-card-header">
                                <div class="quiz-card-category">
                                    <i class="fas fa-code"></i>
                                    C√¥ng ngh·ªá th√¥ng tin
                                </div>
                                <div class="quiz-card-stats">
                                    <div class="quiz-card-stat">
                                        <i class="fas fa-eye"></i>
                                        <span>98</span>
                                    </div>
                                    <div class="quiz-card-stat">
                                        <i class="fas fa-fire"></i>
                                        <span>67</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="quiz-card-content">
                                <div class="quiz-card-title">L·∫≠p tr√¨nh h∆∞·ªõng ƒë·ªëi t∆∞·ª£ng v·ªõi Java</div>
                                
                                <div class="quiz-card-meta">
                                    <div class="quiz-card-meta-row">
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-user"></i>
                                            <span>Tr·∫ßn Th·ªã B</span>
                                        </div>
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-question-circle"></i>
                                            <span>30 c√¢u</span>
                                        </div>
                                    </div>
                                    <div class="quiz-card-meta-row">
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-clock"></i>
                                            <span>4 gi·ªù tr∆∞·ªõc</span>
                                        </div>
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-calendar"></i>
                                            <span>03/01/2026</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="quiz-card-actions">
                                    <button class="btn-quiz-action btn-quiz-primary">
                                        <i class="fas fa-play"></i>
                                        <span>V√†o thi</span>
                                    </button>
                                    <button class="btn-quiz-action btn-quiz-secondary">
                                        <i class="fas fa-info-circle"></i>
                                        <span>Chi ti·∫øt</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-card-horizontal" data-quiz-id="sample3">
                            <div class="quiz-card-header">
                                <div class="quiz-card-category">
                                    <i class="fas fa-chart-line"></i>
                                    Kinh t·∫ø h·ªçc
                                </div>
                                <div class="quiz-card-stats">
                                    <div class="quiz-card-stat">
                                        <i class="fas fa-eye"></i>
                                        <span>76</span>
                                    </div>
                                    <div class="quiz-card-stat">
                                        <i class="fas fa-fire"></i>
                                        <span>45</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="quiz-card-content">
                                <div class="quiz-card-title">Kinh t·∫ø vi m√¥ - C∆° b·∫£n</div>
                                
                                <div class="quiz-card-meta">
                                    <div class="quiz-card-meta-row">
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-user"></i>
                                            <span>L√™ VƒÉn C</span>
                                        </div>
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-question-circle"></i>
                                            <span>20 c√¢u</span>
                                        </div>
                                    </div>
                                    <div class="quiz-card-meta-row">
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-clock"></i>
                                            <span>6 gi·ªù tr∆∞·ªõc</span>
                                        </div>
                                        <div class="quiz-card-meta-item">
                                            <i class="fas fa-calendar"></i>
                                            <span>02/01/2026</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="quiz-card-actions">
                                    <button class="btn-quiz-action btn-quiz-primary">
                                        <i class="fas fa-play"></i>
                                        <span>V√†o thi</span>
                                    </button>
                                    <button class="btn-quiz-action btn-quiz-secondary">
                                        <i class="fas fa-info-circle"></i>
                                        <span>Chi ti·∫øt</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;

                    trendingContainer.innerHTML = sampleQuizHTML;
                    latestContainer.innerHTML = sampleQuizHTML;

                    // Apply fixes to new cards
                    const newCards = document.querySelectorAll('.quiz-card-horizontal');
                    newCards.forEach(card => {
                        card.style.flex = '0 0 340px';
                        card.style.width = '340px';
                        card.style.height = '390px';
                        card.style.minWidth = '340px';
                        card.style.maxWidth = '340px';
                    });

                    console.log('‚úÖ Loaded sample quiz data');
                }
            }, 3000);
        });

        // üîß Apply fixes when new content is loaded
        const observer = new MutationObserver(function (mutations) {
            mutations.forEach(function (mutation) {
                if (mutation.type === 'childList') {
                    const containers = document.querySelectorAll('#trending-quizzes, #latest-quizzes');
                    containers.forEach(container => {
                        if (container && container.children.length > 0) {
                            container.style.display = 'flex';
                            container.style.flexDirection = 'row';
                            container.style.flexWrap = 'nowrap';
                            container.style.overflowX = 'auto';
                            container.style.overflowY = 'hidden';

                            // Fix cards
                            const cards = container.querySelectorAll('.quiz-card-horizontal');
                            cards.forEach(card => {
                                card.style.flex = '0 0 340px';
                                card.style.width = '340px';
                                card.style.height = '390px';
                            });
                        }
                    });
                }
            });
        });

        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
    </script>

    <!-- ü¶åüéÖ INSTANT GIF INITIALIZATION - NO WAITING -->
    <script>
        // Kh·ªüi t·∫°o ngay l·∫≠p t·ª©c, kh√¥ng ƒë·ª£i DOM
        (function initGifsInstantly() {
            // H√†m init s·∫Ω ch·∫°y ngay khi script ƒë∆∞·ª£c parse
            function tryInit() {
                const reindeerGif = document.querySelector('.reindeer-on-card');
                const santaGif = document.querySelector('.santa-on-card');

                if (reindeerGif) {
                    reindeerGif.style.display = 'block';
                    reindeerGif.style.visibility = 'visible';
                    reindeerGif.style.opacity = '1';
                    reindeerGif.style.animation = 'reindeerContinuousJump 1.5s ease-in-out infinite';
                    console.log('ü¶å Reindeer loaded!');
                }

                if (santaGif) {
                    santaGif.style.display = 'block';
                    santaGif.style.visibility = 'visible';
                    santaGif.style.opacity = '1';
                    santaGif.style.animation = 'santaContinuousJump 1.8s ease-in-out infinite';
                    console.log('üéÖ Santa loaded!');
                }

                // N·∫øu ch∆∞a t√¨m th·∫•y, th·ª≠ l·∫°i sau 10ms
                if (!reindeerGif || !santaGif) {
                    setTimeout(tryInit, 10);
                }
            }

            // B·∫Øt ƒë·∫ßu init ngay
            tryInit();
        })();
    </script>

    <!-- üéØ ADAPTIVE EXPLORE LAYOUT SYSTEM CSS -->
    <style>
        /* üéØ DEVICE DETECTION & ADAPTIVE VARIABLES */
        :root {
            --adaptive-primary: #667eea;
            --adaptive-secondary: #764ba2;
            --adaptive-success: #48bb78;
            --adaptive-warning: #ed8936;
            --adaptive-danger: #f56565;
            --adaptive-info: #4299e1;

            --adaptive-bg-primary: #ffffff;
            --adaptive-bg-secondary: #f7fafc;
            --adaptive-bg-tertiary: #edf2f7;

            --adaptive-text-primary: #2d3748;
            --adaptive-text-secondary: #4a5568;
            --adaptive-text-muted: #718096;

            --adaptive-border: #e2e8f0;
            --adaptive-border-light: #f1f5f9;

            --adaptive-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
            --adaptive-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
            --adaptive-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.12);

            --adaptive-radius-sm: 8px;
            --adaptive-radius-md: 12px;
            --adaptive-radius-lg: 16px;

            --adaptive-spacing-xs: 8px;
            --adaptive-spacing-sm: 12px;
            --adaptive-spacing-md: 16px;
            --adaptive-spacing-lg: 24px;
            --adaptive-spacing-xl: 32px;
        }

        /* üéØ TOP SECTION ONLY - Ch·ªâ √°p d·ª•ng cho ph·∫ßn tr√™n */
        .explore-top-section {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto 24px auto;
            padding: 20px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            overflow: hidden;
            box-sizing: border-box;
            border-radius: 16px;
            contain: layout style;
        }

        /* üì± DEVICE-AWARE HEADER */
        .explore-header-adaptive {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding: 20px;
            background: linear-gradient(135deg, var(--adaptive-primary), var(--adaptive-secondary));
            border-radius: 12px;
            color: white;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .explore-title-section {
            display: flex;
            align-items: center;
            gap: var(--adaptive-spacing-md);
        }

        .explore-icon-wrapper {
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: var(--adaptive-radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .explore-title-content h2 {
            font-size: 28px;
            font-weight: 700;
            margin: 0 0 4px 0;
        }

        .explore-subtitle {
            font-size: 14px;
            opacity: 0.9;
            margin: 0;
        }

        .explore-device-indicator {
            display: flex;
            align-items: center;
            gap: var(--adaptive-spacing-xs);
            background: rgba(255, 255, 255, 0.15);
            padding: var(--adaptive-spacing-xs) var(--adaptive-spacing-sm);
            border-radius: var(--adaptive-radius-sm);
            font-size: 12px;
            font-weight: 600;
        }

        /* üé® SMART CONTROL PANEL */
        .smart-control-panel {
            display: grid;
            gap: 16px;
            margin-bottom: 0;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            justify-items: center;
        }

        .control-card {
            background: var(--adaptive-bg-primary);
            border-radius: 12px;
            padding: 18px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--adaptive-border-light);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 16px;
            width: 100%;
            max-width: 320px;
            box-sizing: border-box;
            justify-self: center;
        }

        .control-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--adaptive-shadow-lg);
            border-color: var(--adaptive-primary);
        }

        .card-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--adaptive-primary), var(--adaptive-secondary));
            border-radius: var(--adaptive-radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            flex-shrink: 0;
        }

        .card-content {
            flex: 1;
            min-width: 0;
            overflow: hidden;
        }

        .card-content label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--adaptive-text-primary);
            margin-bottom: var(--adaptive-spacing-xs);
        }

        .smart-input,
        .smart-select {
            width: 100%;
            max-width: 100%;
            padding: var(--adaptive-spacing-sm) var(--adaptive-spacing-md);
            border: 2px solid var(--adaptive-border);
            border-radius: var(--adaptive-radius-sm);
            background: var(--adaptive-bg-secondary);
            color: var(--adaptive-text-primary);
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-sizing: border-box;
            min-width: 0;
        }

        .smart-input:focus,
        .smart-select:focus {
            outline: none;
            border-color: var(--adaptive-primary);
            background: var(--adaptive-bg-primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .room-input-group {
            display: flex;
            gap: var(--adaptive-spacing-xs);
            align-items: center;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        .room-code {
            text-align: center;
            letter-spacing: 1px;
            font-weight: 600;
            max-width: 120px;
            min-width: 0;
            flex: 1;
        }

        .smart-btn {
            padding: var(--adaptive-spacing-sm) var(--adaptive-spacing-md);
            border: none;
            border-radius: var(--adaptive-radius-sm);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--adaptive-spacing-xs);
        }

        .smart-btn.primary {
            background: linear-gradient(135deg, var(--adaptive-primary), var(--adaptive-secondary));
            color: white;
            width: 40px;
            height: 40px;
        }

        .smart-btn.secondary {
            background: var(--adaptive-bg-tertiary);
            color: var(--adaptive-text-primary);
            border: 1px solid var(--adaptive-border);
        }

        .smart-btn.full-width {
            width: 100%;
        }

        .smart-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--adaptive-shadow-md);
        }

        .smart-btn.primary:hover {
            background: linear-gradient(135deg, #5a67d8, #6b46c1);
        }

        .smart-btn.secondary:hover {
            background: var(--adaptive-bg-primary);
            border-color: var(--adaptive-primary);
        }

        .filter-result {
            font-size: 12px;
            color: var(--adaptive-text-muted);
            margin-top: var(--adaptive-spacing-xs);
            font-weight: 500;
        }

        /* üéØ ADAPTIVE QUIZ DISPLAY AREA */
        .adaptive-quiz-display {
            background: var(--adaptive-bg-primary);
            border-radius: var(--adaptive-radius-lg);
            box-shadow: var(--adaptive-shadow-md);
            overflow: hidden;
        }

        .adaptive-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--adaptive-spacing-xl);
            gap: var(--adaptive-spacing-md);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--adaptive-border);
            border-top: 3px solid var(--adaptive-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            color: var(--adaptive-text-muted);
            font-weight: 500;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* üéØ QUIZ SECTIONS */
        .quiz-sections-container {
            display: flex;
            flex-direction: column;
            gap: var(--adaptive-spacing-xl);
        }

        .adaptive-quiz-section {
            padding: var(--adaptive-spacing-lg);
        }

        .section-header-adaptive {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--adaptive-spacing-lg);
            padding-bottom: var(--adaptive-spacing-md);
            border-bottom: 2px solid var(--adaptive-border-light);
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: var(--adaptive-spacing-sm);
        }

        .section-title i {
            font-size: 20px;
            color: var(--adaptive-primary);
        }

        .section-title h3 {
            font-size: 20px;
            font-weight: 700;
            color: var(--adaptive-text-primary);
            margin: 0;
        }

        .section-action-btn {
            background: transparent;
            border: 2px solid var(--adaptive-border);
            color: var(--adaptive-text-secondary);
            padding: var(--adaptive-spacing-xs) var(--adaptive-spacing-md);
            border-radius: var(--adaptive-radius-sm);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: var(--adaptive-spacing-xs);
        }

        .section-action-btn:hover {
            background: var(--adaptive-primary);
            color: white;
            border-color: var(--adaptive-primary);
            transform: translateY(-1px);
        }

        .adaptive-quiz-container {
            background: var(--adaptive-bg-secondary);
            border-radius: var(--adaptive-radius-md);
            padding: var(--adaptive-spacing-md);
        }

        .quiz-scroll-area {
            display: flex;
            gap: var(--adaptive-spacing-lg);
            overflow-x: auto;
            overflow-y: hidden;
            padding: var(--adaptive-spacing-md);
            scroll-behavior: smooth;
            scrollbar-width: thin;
        }

        .quiz-scroll-area::-webkit-scrollbar {
            height: 6px;
        }

        .quiz-scroll-area::-webkit-scrollbar-track {
            background: var(--adaptive-border-light);
            border-radius: 3px;
        }

        .quiz-scroll-area::-webkit-scrollbar-thumb {
            background: var(--adaptive-primary);
            border-radius: 3px;
        }

        .quiz-loading-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--adaptive-spacing-sm);
            padding: var(--adaptive-spacing-xl);
            color: var(--adaptive-text-muted);
            font-weight: 500;
            min-width: 200px;
        }

        /* üì± RESPONSIVE BREAKPOINTS */

        /* Large Desktop (1200px+) */
        @media (min-width: 1200px) {
            .smart-control-panel {
                grid-template-columns: repeat(4, 1fr);
                max-width: 1200px;
                margin: 0 auto;
            }

            .explore-top-section {
                padding: 24px;
                max-width: 1200px;
            }
        }

        /* Desktop (992px - 1199px) */
        @media (max-width: 1199px) and (min-width: 992px) {
            .smart-control-panel {
                grid-template-columns: repeat(3, 1fr);
                max-width: 960px;
                margin: 0 auto;
            }

            .explore-top-section {
                max-width: 960px;
                padding: 20px;
            }
        }

        /* Tablet (768px - 991px) */
        @media (max-width: 991px) and (min-width: 768px) {
            .smart-control-panel {
                grid-template-columns: repeat(2, 1fr);
                max-width: 720px;
                margin: 0 auto;
            }

            .explore-top-section {
                max-width: 720px;
                padding: 16px;
            }

            .explore-header-adaptive {
                flex-direction: column;
                gap: 16px;
                text-align: center;
                padding: 16px;
            }

            .explore-title-content h2 {
                font-size: 24px;
            }
        }

        /* Mobile Large (576px - 767px) */
        @media (max-width: 767px) and (min-width: 576px) {
            .smart-control-panel {
                grid-template-columns: 1fr;
                gap: 12px;
                max-width: 540px;
                margin: 0 auto;
            }

            .explore-top-section {
                padding: 16px;
                max-width: 100%;
                margin: 0 auto 20px auto;
            }

            .explore-header-adaptive {
                flex-direction: column;
                gap: 12px;
                text-align: center;
                padding: 16px;
            }

            .explore-title-content h2 {
                font-size: 22px;
            }

            .control-card {
                flex-direction: column;
                text-align: center;
                gap: 12px;
                padding: 16px;
                max-width: 100%;
            }

            .room-input-group {
                flex-direction: column;
                gap: 8px;
                width: 100%;
            }

            .room-code {
                max-width: 100%;
                width: 100%;
            }

            .smart-btn.primary {
                width: 100%;
                height: 40px;
            }
        }

        /* Mobile Small (320px - 575px) */
        @media (max-width: 575px) {
            .explore-top-section {
                padding: 12px;
                max-width: 100%;
                margin: 0 auto 16px auto;
            }

            .explore-header-adaptive {
                padding: 12px;
                flex-direction: column;
                gap: 8px;
                text-align: center;
            }

            .explore-title-content h2 {
                font-size: 20px;
            }

            .explore-subtitle {
                font-size: 12px;
            }

            .smart-control-panel {
                grid-template-columns: 1fr;
                gap: 8px;
                max-width: 100%;
            }

            .control-card {
                padding: 12px;
                flex-direction: column;
                text-align: center;
                gap: 8px;
                max-width: 100%;
            }

            .card-icon {
                width: 36px;
                height: 36px;
                font-size: 16px;
            }

            .room-input-group {
                flex-direction: column;
                gap: 8px;
                width: 100%;
            }

            .room-code {
                max-width: 100%;
                width: 100%;
            }

            .smart-btn.primary {
                width: 100%;
                height: 40px;
            }

            .section-header-adaptive {
                flex-direction: column;
                gap: 8px;
                align-items: flex-start;
            }

            .section-title h3 {
                font-size: 18px;
            }
        }

        /* üéØ DEVICE-SPECIFIC OPTIMIZATIONS */

        /* MINIMAL: Prevent horizontal overflow on all devices */
        #explore-tab {
            overflow-x: hidden;
        }

        #explore-tab * {
            box-sizing: border-box;
        }

        /* Ensure main content area doesn't overflow */
        .main-content-area {
            overflow-x: hidden;
        }

        /* Specific for explore tab only */
        #explore-tab.tab-content {
            padding: 20px;
        }

        /* üéØ MINIMAL CENTER ALIGNMENT */
        .explore-top-section {
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* MINIMAL: Force center for main wrapper */
        .main-wrapper {
            overflow-x: hidden;
        }

        .app-layout {
            overflow-x: hidden;
        }

        /* üéØ ENSURE QUIZ DISPLAY AREA IS SEPARATE */
        .shared-quizzes-section {
            margin-top: 0 !important;
            padding-top: 0 !important;
            clear: both;
            width: 100%;
            max-width: 100%;
            overflow: hidden;
        }

        /* üîß MINIMAL EXPLORE TAB LAYOUT */
        #explore-tab .explore-top-section {
            max-width: 1200px;
            margin: 0 auto 24px auto;
        }

        #explore-tab .shared-quizzes-section {
            margin-top: 0;
        }

        /* üîß KH√îI PH·ª§C QUIZ CARDS G·ªêC - Giao di·ªán g·ªëc cho quiz c·ªßa ng∆∞·ªùi d√πng */
        .quiz-list {
            display: grid;
            gap: 25px;
        }

        .quiz-item {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.03), rgba(118, 75, 162, 0.03));
            border: 2px solid var(--border-color, #e1e5f2);
            border-radius: 16px;
            padding: 25px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .quiz-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transform: scaleY(0);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .quiz-item:hover {
            border-color: var(--primary-color, #667eea);
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.2);
        }

        .quiz-item:hover::before {
            transform: scaleY(1);
        }

        .quiz-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 20px;
        }

        .quiz-item-info {
            flex: 1;
        }

        .quiz-item-info h3 {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary, #333);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quiz-item-info h3::before {
            content: 'üìù';
            font-size: 24px;
        }

        .quiz-item-info p {
            color: var(--text-secondary, #666);
            font-size: 15px;
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .quiz-item-meta {
            display: flex;
            gap: 20px;
            font-size: 13px;
            color: var(--text-secondary, #666);
            flex-wrap: wrap;
        }

        .quiz-item-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 8px;
        }

        .quiz-item-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* ƒê·∫£m b·∫£o quiz cards hi·ªÉn th·ªã ƒë√∫ng trong t·∫•t c·∫£ tabs */
        #home-tab .quiz-item,
        #manage-tab .quiz-item,
        .quiz-manage-list .quiz-item {
            display: block;
            visibility: visible;
            opacity: 1;
        }

        /* Empty State */
        .empty-state,
        .quiz-placeholder,
        .results-placeholder {
            text-align: center;
            padding: 80px 30px;
            color: var(--text-secondary, #666);
        }

        .empty-state i,
        .quiz-placeholder i,
        .results-placeholder i {
            font-size: 64px;
            color: var(--border-color, #e1e5f2);
            margin-bottom: 25px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .empty-state h3,
        .quiz-placeholder h3,
        .results-placeholder h3 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-primary, #333);
        }

        .empty-state p,
        .quiz-placeholder p,
        .results-placeholder p {
            font-size: 16px;
            opacity: 0.8;
        }

        /* Touch Device Optimizations */
        @media (hover: none) and (pointer: coarse) {

            .smart-btn,
            .section-action-btn {
                min-height: 44px;
                min-width: 44px;
            }

            .smart-input,
            .smart-select {
                min-height: 44px;
            }

            .control-card:hover {
                transform: none;
            }
        }

        /* High DPI Display Optimizations */
        @media (-webkit-min-device-pixel-ratio: 2),
        (min-resolution: 192dpi) {

            .explore-icon-wrapper,
            .card-icon {
                border: 0.5px solid rgba(255, 255, 255, 0.1);
            }
        }

        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            :root {
                --adaptive-bg-primary: #1a202c;
                --adaptive-bg-secondary: #2d3748;
                --adaptive-bg-tertiary: #4a5568;
                --adaptive-text-primary: #f7fafc;
                --adaptive-text-secondary: #e2e8f0;
                --adaptive-text-muted: #a0aec0;
                --adaptive-border: #4a5568;
                --adaptive-border-light: #2d3748;
            }
        }

        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {

            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* üîß GLOBAL LAYOUT FIX - NgƒÉn ch·∫∑n overflow v√† l·ªách layout */
        * {
            box-sizing: border-box;
        }

        html,
        body {
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        .tab-content {
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
            box-sizing: border-box;
        }

        /* üè† CSS CH·ªà CHO TRANG CH·ª¶ - KH√îNG ·∫¢NH H∆Ø·ªûNG TAB EXPLORE */
        #home-tab .quiz-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }

        #home-tab .quiz-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.03), rgba(118, 75, 162, 0.03));
            border: 2px solid #e1e5f2;
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 300px;
        }

        #home-tab .quiz-card::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transform: scaleY(0);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #home-tab .quiz-card:hover {
            border-color: #667eea;
            transform: translateY(-8px);
            box-shadow: 0 16px 40px rgba(102, 126, 234, 0.2);
        }

        #home-tab .quiz-card:hover::before {
            transform: scaleY(1);
        }

        #home-tab .quiz-card-header {
            flex: 1;
            margin-bottom: 20px;
        }

        #home-tab .quiz-card-title {
            font-size: 20px;
            font-weight: 700;
            color: #333;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            line-height: 1.3;
        }

        #home-tab .quiz-card-title::before {
            content: 'üìù';
            font-size: 24px;
            flex-shrink: 0;
        }

        #home-tab .quiz-card-description {
            color: #666;
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 16px;
            min-height: 48px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        #home-tab .quiz-card-meta {
            display: flex;
            gap: 16px;
            font-size: 13px;
            color: #666;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        #home-tab .quiz-card-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 8px;
            font-weight: 500;
        }

        #home-tab .quiz-card-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: auto;
            padding-top: 16px;
            border-top: 1px solid rgba(102, 126, 234, 0.1);
        }

        #home-tab .quiz-card-actions .btn {
            padding: 10px 16px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
            flex: 1;
            justify-content: center;
            min-width: 80px;
        }

        #home-tab .quiz-card-actions .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        #home-tab .quiz-card-actions .btn-primary:hover {
            background: linear-gradient(135deg, #5a67d8, #6b46c1);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        #home-tab .quiz-card-actions .btn-secondary {
            background: #f7fafc;
            color: #4a5568;
            border: 1px solid #e2e8f0;
        }

        #home-tab .quiz-card-actions .btn-secondary:hover {
            background: #edf2f7;
            border-color: #cbd5e0;
            transform: translateY(-1px);
        }

        #home-tab .quiz-card-actions .btn-share-quiz {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            box-shadow: 0 4px 12px rgba(72, 187, 120, 0.3);
        }

        #home-tab .quiz-card-actions .btn-share-quiz:hover {
            background: linear-gradient(135deg, #38a169, #2f855a);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(72, 187, 120, 0.4);
        }

        /* Responsive ch·ªâ cho home tab */
        @media (max-width: 768px) {
            #home-tab .quiz-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            #home-tab .quiz-card {
                padding: 20px;
                min-height: 260px;
            }

            #home-tab .quiz-card-actions {
                flex-direction: column;
            }

            #home-tab .quiz-card-actions .btn {
                flex: none;
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            #home-tab .quiz-card {
                padding: 16px;
                min-height: 240px;
            }

            #home-tab .quiz-card-title {
                font-size: 18px;
            }

            #home-tab .quiz-card-description {
                font-size: 14px;
                min-height: 42px;
            }
        }
    </style>

    <!-- üéØ DEVICE DETECTION & ADAPTIVE LAYOUT JAVASCRIPT -->
    <script>
        // üéØ Advanced Device Detection System
        class DeviceDetector {
            constructor() {
                this.deviceInfo = this.detectDevice();
                this.init();
            }

            detectDevice() {
                const userAgent = navigator.userAgent;
                const screenWidth = window.innerWidth;
                const screenHeight = window.innerHeight;
                const pixelRatio = window.devicePixelRatio || 1;
                const touchSupport = 'ontouchstart' in window;

                // Device type detection
                let deviceType = 'desktop';
                let deviceSize = 'large';
                let deviceIcon = 'fas fa-desktop';

                if (screenWidth <= 575) {
                    deviceType = 'mobile';
                    deviceSize = 'small';
                    deviceIcon = 'fas fa-mobile-alt';
                } else if (screenWidth <= 767) {
                    deviceType = 'mobile';
                    deviceSize = 'medium';
                    deviceIcon = 'fas fa-mobile-alt';
                } else if (screenWidth <= 991) {
                    deviceType = 'tablet';
                    deviceSize = 'medium';
                    deviceIcon = 'fas fa-tablet-alt';
                } else if (screenWidth <= 1199) {
                    deviceType = 'desktop';
                    deviceSize = 'medium';
                    deviceIcon = 'fas fa-laptop';
                } else {
                    deviceType = 'desktop';
                    deviceSize = 'large';
                    deviceIcon = 'fas fa-desktop';
                }

                // OS Detection
                let os = 'unknown';
                if (userAgent.includes('Windows')) os = 'windows';
                else if (userAgent.includes('Mac')) os = 'macos';
                else if (userAgent.includes('Linux')) os = 'linux';
                else if (userAgent.includes('Android')) os = 'android';
                else if (userAgent.includes('iOS') || userAgent.includes('iPhone') || userAgent.includes('iPad')) os = 'ios';

                // Browser Detection
                let browser = 'unknown';
                if (userAgent.includes('Chrome')) browser = 'chrome';
                else if (userAgent.includes('Firefox')) browser = 'firefox';
                else if (userAgent.includes('Safari')) browser = 'safari';
                else if (userAgent.includes('Edge')) browser = 'edge';

                return {
                    type: deviceType,
                    size: deviceSize,
                    icon: deviceIcon,
                    width: screenWidth,
                    height: screenHeight,
                    pixelRatio: pixelRatio,
                    touchSupport: touchSupport,
                    os: os,
                    browser: browser,
                    isHighDPI: pixelRatio > 1.5,
                    isRetina: pixelRatio >= 2,
                    orientation: screenWidth > screenHeight ? 'landscape' : 'portrait'
                };
            }

            init() {
                this.updateDeviceIndicator();
                this.applyDeviceOptimizations();
                this.setupEventListeners();

                console.log('üéØ Device Detection:', this.deviceInfo);
            }

            updateDeviceIndicator() {
                const indicator = document.getElementById('device-indicator');
                if (indicator) {
                    const deviceName = `${this.deviceInfo.type.charAt(0).toUpperCase() + this.deviceInfo.type.slice(1)} (${this.deviceInfo.width}x${this.deviceInfo.height})`;

                    indicator.innerHTML = `
                        <i class="${this.deviceInfo.icon}"></i>
                        <span>${deviceName}</span>
                    `;
                }
            }

            applyDeviceOptimizations() {
                const container = document.getElementById('explore-adaptive-container');
                if (!container) return;

                // Add device-specific classes
                container.classList.add(`device-${this.deviceInfo.type}`);
                container.classList.add(`device-${this.deviceInfo.size}`);
                container.classList.add(`os-${this.deviceInfo.os}`);

                if (this.deviceInfo.touchSupport) {
                    container.classList.add('touch-device');
                }

                if (this.deviceInfo.isHighDPI) {
                    container.classList.add('high-dpi');
                }

                // Apply layout optimizations
                this.optimizeControlPanel();
                this.optimizeQuizDisplay();
            }

            optimizeControlPanel() {
                const panel = document.getElementById('smart-control-panel');
                if (!panel) return;

                // Adjust grid based on device
                let columns;
                switch (this.deviceInfo.type) {
                    case 'mobile':
                        columns = '1fr';
                        break;
                    case 'tablet':
                        columns = 'repeat(2, 1fr)';
                        break;
                    case 'desktop':
                        columns = this.deviceInfo.size === 'large'
                            ? 'repeat(4, 1fr)'
                            : 'repeat(3, 1fr)';
                        break;
                    default:
                        columns = 'repeat(auto-fit, minmax(280px, 1fr))';
                }

                panel.style.gridTemplateColumns = columns;
            }

            optimizeQuizDisplay() {
                const display = document.getElementById('adaptive-quiz-display');
                if (!display) return;

                // Adjust quiz card sizes based on device
                const cards = display.querySelectorAll('.quiz-card-horizontal');
                cards.forEach(card => {
                    if (this.deviceInfo.type === 'mobile') {
                        card.style.minWidth = this.deviceInfo.size === 'small' ? '260px' : '280px';
                        card.style.maxWidth = this.deviceInfo.size === 'small' ? '260px' : '280px';
                    } else if (this.deviceInfo.type === 'tablet') {
                        card.style.minWidth = '320px';
                        card.style.maxWidth = '320px';
                    } else {
                        card.style.minWidth = '340px';
                        card.style.maxWidth = '340px';
                    }
                });
            }

            setupEventListeners() {
                // Handle orientation change
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => {
                        this.deviceInfo = this.detectDevice();
                        this.updateDeviceIndicator();
                        this.applyDeviceOptimizations();
                    }, 100);
                });

                // Handle resize with debounce
                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(() => {
                        this.deviceInfo = this.detectDevice();
                        this.updateDeviceIndicator();
                        this.applyDeviceOptimizations();
                    }, 250);
                });
            }
        }

        // üéØ Smart Input Handlers
        class SmartInputHandlers {
            constructor() {
                this.init();
            }

            init() {
                this.setupRoomCodeInput();
                this.setupCategoryFilter();
                this.setupRefreshButton();
            }

            setupRoomCodeInput() {
                const input = document.getElementById('join-room-code-input');
                const button = document.getElementById('btn-join-room');

                if (!input || !button) return;

                // Input validation
                input.addEventListener('input', (e) => {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length > 6) value = value.substring(0, 6);
                    e.target.value = value;

                    // Visual feedback
                    if (value.length === 6) {
                        input.style.borderColor = 'var(--adaptive-success)';
                        button.style.background = 'linear-gradient(135deg, var(--adaptive-success), #38a169)';
                    } else if (value.length > 0) {
                        input.style.borderColor = 'var(--adaptive-warning)';
                        button.style.background = 'linear-gradient(135deg, var(--adaptive-warning), #dd6b20)';
                    } else {
                        input.style.borderColor = 'var(--adaptive-border)';
                        button.style.background = 'linear-gradient(135deg, var(--adaptive-primary), var(--adaptive-secondary))';
                    }
                });

                // Enter key support
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && e.target.value.length === 6) {
                        this.joinRoom();
                    }
                });

                // Button click
                button.addEventListener('click', () => {
                    if (input.value.length === 6) {
                        this.joinRoom();
                    } else {
                        this.shakeElement(input.closest('.control-card'));
                        input.focus();
                    }
                });
            }

            setupCategoryFilter() {
                const select = document.getElementById('category-filter-select');
                const result = document.getElementById('filter-result-text');

                if (!select || !result) return;

                select.addEventListener('change', (e) => {
                    const value = e.target.value;
                    const text = e.target.options[e.target.selectedIndex].text;

                    if (value === 'all') {
                        result.textContent = 'Hi·ªÉn th·ªã t·∫•t c·∫£ t√†i li·ªáu';
                    } else {
                        result.textContent = `L·ªçc theo: ${text}`;
                    }

                    // Trigger filter (if exploreQuizManager exists)
                    if (window.exploreQuizManager && window.exploreQuizManager.filterByCategory) {
                        window.exploreQuizManager.filterByCategory(value);
                    }
                });
            }

            setupRefreshButton() {
                const button = document.getElementById('refresh-shared-quizzes');
                if (!button) return;

                button.addEventListener('click', () => {
                    // Add loading state
                    const originalHTML = button.innerHTML;
                    button.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>ƒêang t·∫£i...</span>';
                    button.disabled = true;

                    // Simulate refresh (replace with actual logic)
                    setTimeout(() => {
                        button.innerHTML = originalHTML;
                        button.disabled = false;

                        // Trigger refresh (if exploreQuizManager exists)
                        if (window.exploreQuizManager && window.exploreQuizManager.loadSharedQuizzes) {
                            window.exploreQuizManager.loadSharedQuizzes();
                        }
                    }, 1500);
                });
            }

            joinRoom() {
                const input = document.getElementById('join-room-code-input');
                const roomCode = input.value.trim();

                if (roomCode.length !== 6) {
                    alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p ƒë√∫ng 6 s·ªë!');
                    return;
                }

                // Show success feedback
                const card = input.closest('.control-card');
                const originalBg = card.style.background;
                card.style.background = 'linear-gradient(135deg, var(--adaptive-success), #38a169)';
                card.style.color = 'white';

                setTimeout(() => {
                    card.style.background = originalBg;
                    card.style.color = '';
                }, 2000);

                alert(`üéØ ƒêang v√†o ph√≤ng thi: ${roomCode}`);
                input.value = '';
            }

            shakeElement(element) {
                element.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    element.style.animation = '';
                }, 500);
            }
        }

        // üéØ Initialize Adaptive System
        document.addEventListener('DOMContentLoaded', function () {
            console.log('üéØ Initializing Adaptive Explore Layout System...');

            // Initialize device detection
            window.deviceDetector = new DeviceDetector();

            // Initialize smart input handlers
            window.smartInputHandlers = new SmartInputHandlers();

            console.log('‚úÖ Adaptive Explore Layout System initialized');
        });

        // Add shake animation CSS
        const shakeCSS = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
        `;

        const style = document.createElement('style');
        style.textContent = shakeCSS;
        document.head.appendChild(style);
    </script>
</body>

</html>